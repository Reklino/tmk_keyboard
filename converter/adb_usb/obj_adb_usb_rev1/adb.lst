   1               		.file	"adb.c"
   2               	__SP_H__ = 0x3e
   3               	__SP_L__ = 0x3d
   4               	__SREG__ = 0x3f
   5               	__tmp_reg__ = 0
   6               	__zero_reg__ = 1
   7               		.text
   8               	.Ltext0:
   9               		.cfi_sections	.debug_frame
  10               		.section	.text.place_bit0,"ax",@progbits
  12               	place_bit0:
  13               	.LFB18:
  14               		.file 1 "../../tmk_core/protocol/adb.c"
   1:../../tmk_core/protocol/adb.c **** /*
   2:../../tmk_core/protocol/adb.c **** Copyright 2011-19 Jun WAKO <wakojun@gmail.com>
   3:../../tmk_core/protocol/adb.c **** Copyright 2013 Shay Green <gblargg@gmail.com>
   4:../../tmk_core/protocol/adb.c **** 
   5:../../tmk_core/protocol/adb.c **** This software is licensed with a Modified BSD License.
   6:../../tmk_core/protocol/adb.c **** All of this is supposed to be Free Software, Open Source, DFSG-free,
   7:../../tmk_core/protocol/adb.c **** GPL-compatible, and OK to use in both free and proprietary applications.
   8:../../tmk_core/protocol/adb.c **** Additions and corrections to this file are welcome.
   9:../../tmk_core/protocol/adb.c **** 
  10:../../tmk_core/protocol/adb.c **** 
  11:../../tmk_core/protocol/adb.c **** Redistribution and use in source and binary forms, with or without
  12:../../tmk_core/protocol/adb.c **** modification, are permitted provided that the following conditions are met:
  13:../../tmk_core/protocol/adb.c **** 
  14:../../tmk_core/protocol/adb.c **** * Redistributions of source code must retain the above copyright
  15:../../tmk_core/protocol/adb.c ****   notice, this list of conditions and the following disclaimer.
  16:../../tmk_core/protocol/adb.c **** 
  17:../../tmk_core/protocol/adb.c **** * Redistributions in binary form must reproduce the above copyright
  18:../../tmk_core/protocol/adb.c ****   notice, this list of conditions and the following disclaimer in
  19:../../tmk_core/protocol/adb.c ****   the documentation and/or other materials provided with the
  20:../../tmk_core/protocol/adb.c ****   distribution.
  21:../../tmk_core/protocol/adb.c **** 
  22:../../tmk_core/protocol/adb.c **** * Neither the name of the copyright holders nor the names of
  23:../../tmk_core/protocol/adb.c ****   contributors may be used to endorse or promote products derived
  24:../../tmk_core/protocol/adb.c ****   from this software without specific prior written permission.
  25:../../tmk_core/protocol/adb.c **** 
  26:../../tmk_core/protocol/adb.c **** THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
  27:../../tmk_core/protocol/adb.c **** AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
  28:../../tmk_core/protocol/adb.c **** IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
  29:../../tmk_core/protocol/adb.c **** ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE
  30:../../tmk_core/protocol/adb.c **** LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR
  31:../../tmk_core/protocol/adb.c **** CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF
  32:../../tmk_core/protocol/adb.c **** SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS
  33:../../tmk_core/protocol/adb.c **** INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN
  34:../../tmk_core/protocol/adb.c **** CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)
  35:../../tmk_core/protocol/adb.c **** ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE
  36:../../tmk_core/protocol/adb.c **** POSSIBILITY OF SUCH DAMAGE.
  37:../../tmk_core/protocol/adb.c **** */
  38:../../tmk_core/protocol/adb.c **** 
  39:../../tmk_core/protocol/adb.c **** #include <stdbool.h>
  40:../../tmk_core/protocol/adb.c **** #include <util/delay.h>
  41:../../tmk_core/protocol/adb.c **** #include <avr/io.h>
  42:../../tmk_core/protocol/adb.c **** #include <avr/interrupt.h>
  43:../../tmk_core/protocol/adb.c **** #include "adb.h"
  44:../../tmk_core/protocol/adb.c **** #include "print.h"
  45:../../tmk_core/protocol/adb.c **** 
  46:../../tmk_core/protocol/adb.c **** 
  47:../../tmk_core/protocol/adb.c **** // GCC doesn't inline functions normally
  48:../../tmk_core/protocol/adb.c **** #define data_lo() (ADB_DDR |=  (1<<ADB_DATA_BIT))
  49:../../tmk_core/protocol/adb.c **** #define data_hi() (ADB_DDR &= ~(1<<ADB_DATA_BIT))
  50:../../tmk_core/protocol/adb.c **** #define data_in() (ADB_PIN &   (1<<ADB_DATA_BIT))
  51:../../tmk_core/protocol/adb.c **** 
  52:../../tmk_core/protocol/adb.c **** #ifdef ADB_PSW_BIT
  53:../../tmk_core/protocol/adb.c **** static inline void psw_lo(void);
  54:../../tmk_core/protocol/adb.c **** static inline void psw_hi(void);
  55:../../tmk_core/protocol/adb.c **** static inline bool psw_in(void);
  56:../../tmk_core/protocol/adb.c **** #endif
  57:../../tmk_core/protocol/adb.c **** 
  58:../../tmk_core/protocol/adb.c **** static inline void attention(void);
  59:../../tmk_core/protocol/adb.c **** static inline void place_bit0(void);
  60:../../tmk_core/protocol/adb.c **** static inline void place_bit1(void);
  61:../../tmk_core/protocol/adb.c **** static inline void send_byte(uint8_t data);
  62:../../tmk_core/protocol/adb.c **** static inline uint16_t wait_data_lo(uint16_t us);
  63:../../tmk_core/protocol/adb.c **** static inline uint16_t wait_data_hi(uint16_t us);
  64:../../tmk_core/protocol/adb.c **** 
  65:../../tmk_core/protocol/adb.c **** 
  66:../../tmk_core/protocol/adb.c **** void adb_host_init(void)
  67:../../tmk_core/protocol/adb.c **** {
  68:../../tmk_core/protocol/adb.c ****     ADB_PORT &= ~(1<<ADB_DATA_BIT);
  69:../../tmk_core/protocol/adb.c ****     data_hi();
  70:../../tmk_core/protocol/adb.c **** #ifdef ADB_PSW_BIT
  71:../../tmk_core/protocol/adb.c ****     psw_hi();
  72:../../tmk_core/protocol/adb.c **** #endif
  73:../../tmk_core/protocol/adb.c **** }
  74:../../tmk_core/protocol/adb.c **** 
  75:../../tmk_core/protocol/adb.c **** #ifdef ADB_PSW_BIT
  76:../../tmk_core/protocol/adb.c **** bool adb_host_psw(void)
  77:../../tmk_core/protocol/adb.c **** {
  78:../../tmk_core/protocol/adb.c ****     return psw_in();
  79:../../tmk_core/protocol/adb.c **** }
  80:../../tmk_core/protocol/adb.c **** #endif
  81:../../tmk_core/protocol/adb.c **** 
  82:../../tmk_core/protocol/adb.c **** /*
  83:../../tmk_core/protocol/adb.c ****  * Don't call this in a row without the delay, otherwise it makes some of poor controllers
  84:../../tmk_core/protocol/adb.c ****  * overloaded and misses strokes. Recommended interval is 12ms.
  85:../../tmk_core/protocol/adb.c ****  *
  86:../../tmk_core/protocol/adb.c ****  * Thanks a lot, blargg!
  87:../../tmk_core/protocol/adb.c ****  * <http://geekhack.org/index.php?topic=14290.msg1068919#msg1068919>
  88:../../tmk_core/protocol/adb.c ****  * <http://geekhack.org/index.php?topic=14290.msg1070139#msg1070139>
  89:../../tmk_core/protocol/adb.c ****  */
  90:../../tmk_core/protocol/adb.c **** uint16_t adb_host_kbd_recv(uint8_t addr)
  91:../../tmk_core/protocol/adb.c **** {
  92:../../tmk_core/protocol/adb.c ****     return adb_host_talk(addr, ADB_REG_0);
  93:../../tmk_core/protocol/adb.c **** }
  94:../../tmk_core/protocol/adb.c **** 
  95:../../tmk_core/protocol/adb.c **** #ifdef ADB_MOUSE_ENABLE
  96:../../tmk_core/protocol/adb.c **** __attribute__ ((weak))
  97:../../tmk_core/protocol/adb.c **** void adb_mouse_init(void) {
  98:../../tmk_core/protocol/adb.c ****     return;
  99:../../tmk_core/protocol/adb.c **** }
 100:../../tmk_core/protocol/adb.c **** 
 101:../../tmk_core/protocol/adb.c **** __attribute__ ((weak))
 102:../../tmk_core/protocol/adb.c **** void adb_mouse_task(void) {
 103:../../tmk_core/protocol/adb.c ****     return;
 104:../../tmk_core/protocol/adb.c **** }
 105:../../tmk_core/protocol/adb.c **** #endif
 106:../../tmk_core/protocol/adb.c **** 
 107:../../tmk_core/protocol/adb.c **** // This sends Talk command to read data from register and returns length of the data.
 108:../../tmk_core/protocol/adb.c **** uint8_t adb_host_talk_buf(uint8_t addr, uint8_t reg, uint8_t *buf, uint8_t len)
 109:../../tmk_core/protocol/adb.c **** {
 110:../../tmk_core/protocol/adb.c ****     for (int8_t i =0; i < len; i++) buf[i] = 0;
 111:../../tmk_core/protocol/adb.c **** 
 112:../../tmk_core/protocol/adb.c ****     cli();
 113:../../tmk_core/protocol/adb.c ****     attention();
 114:../../tmk_core/protocol/adb.c ****     send_byte((addr<<4) | ADB_CMD_TALK | reg);
 115:../../tmk_core/protocol/adb.c ****     place_bit0();               // Stopbit(0)
 116:../../tmk_core/protocol/adb.c ****     // TODO: Service Request(Srq):
 117:../../tmk_core/protocol/adb.c ****     // Device holds low part of comannd stopbit for 140-260us
 118:../../tmk_core/protocol/adb.c ****     //
 119:../../tmk_core/protocol/adb.c ****     // Command:
 120:../../tmk_core/protocol/adb.c ****     // ......._     ______________________    ___ ............_     -------
 121:../../tmk_core/protocol/adb.c ****     //         |   |                      |  |   |             |   |
 122:../../tmk_core/protocol/adb.c ****     // Command |   |                      |  |   | Data bytes  |   |
 123:../../tmk_core/protocol/adb.c ****     // ........|___|  |     140-260       |__|   |_............|___|
 124:../../tmk_core/protocol/adb.c ****     //         |stop0 | Tlt Stop-to-Start |start1|             |stop0 |
 125:../../tmk_core/protocol/adb.c ****     //
 126:../../tmk_core/protocol/adb.c ****     // Command without data:
 127:../../tmk_core/protocol/adb.c ****     // ......._     __________________________
 128:../../tmk_core/protocol/adb.c ****     //         |   |
 129:../../tmk_core/protocol/adb.c ****     // Command |   |
 130:../../tmk_core/protocol/adb.c ****     // ........|___|  |     140-260       |
 131:../../tmk_core/protocol/adb.c ****     //         |stop0 | Tlt Stop-to-Start |
 132:../../tmk_core/protocol/adb.c ****     //
 133:../../tmk_core/protocol/adb.c ****     // Service Request:
 134:../../tmk_core/protocol/adb.c ****     // ......._                     ______    ___ ............_     -------
 135:../../tmk_core/protocol/adb.c ****     //         |     140-260       |      |  |   |             |   |
 136:../../tmk_core/protocol/adb.c ****     // Command |  Service Request  |      |  |   | Data bytes  |   |
 137:../../tmk_core/protocol/adb.c ****     // ........|___________________|      |__|   |_............|___|
 138:../../tmk_core/protocol/adb.c ****     //         |stop0 |                   |start1|             |stop0 |
 139:../../tmk_core/protocol/adb.c ****     // ......._                     __________
 140:../../tmk_core/protocol/adb.c ****     //         |     140-260       |
 141:../../tmk_core/protocol/adb.c ****     // Command |  Service Request  |
 142:../../tmk_core/protocol/adb.c ****     // ........|___________________|
 143:../../tmk_core/protocol/adb.c ****     //         |stop0 |
 144:../../tmk_core/protocol/adb.c ****     // This can be happened?
 145:../../tmk_core/protocol/adb.c ****     // ......._     ______________________    ___ ............_                   -----
 146:../../tmk_core/protocol/adb.c ****     //         |   |                      |  |   |             |    140-260      |
 147:../../tmk_core/protocol/adb.c ****     // Command |   |                      |  |   | Data bytes  | Service Request |
 148:../../tmk_core/protocol/adb.c ****     // ........|___|  |     140-260       |__|   |_............|_________________|
 149:../../tmk_core/protocol/adb.c ****     //         |stop0 | Tlt Stop-to-Start |start1|             |stop0 |
 150:../../tmk_core/protocol/adb.c ****     //
 151:../../tmk_core/protocol/adb.c ****     // "Service requests are issued by the devices during a very specific time at the
 152:../../tmk_core/protocol/adb.c ****     // end of the reception of the command packet.
 153:../../tmk_core/protocol/adb.c ****     // If a device in need of service issues a service request, it must do so within
 154:../../tmk_core/protocol/adb.c ****     // the 65 µs of the Stop Bit’s low time and maintain the line low for a total of 300 µs."
 155:../../tmk_core/protocol/adb.c ****     //
 156:../../tmk_core/protocol/adb.c ****     // "A device sends a Service Request signal by holding the bus low during the low
 157:../../tmk_core/protocol/adb.c ****     // portion of the stop bit of any command or data transaction. The device must lengthen
 158:../../tmk_core/protocol/adb.c ****     // the stop by a minimum of 140 J.lS beyond its normal duration, as shown in Figure 8-15."
 159:../../tmk_core/protocol/adb.c ****     // http://ww1.microchip.com/downloads/en/AppNotes/00591b.pdf
 160:../../tmk_core/protocol/adb.c ****     if (!wait_data_hi(500)) {    // Service Request(310us Adjustable Keyboard): just ignored
 161:../../tmk_core/protocol/adb.c ****         xprintf("R");
 162:../../tmk_core/protocol/adb.c ****         sei();
 163:../../tmk_core/protocol/adb.c ****         return 0;
 164:../../tmk_core/protocol/adb.c ****     }
 165:../../tmk_core/protocol/adb.c ****     if (!wait_data_lo(500)) {   // Tlt/Stop to Start(140-260us)
 166:../../tmk_core/protocol/adb.c ****         sei();
 167:../../tmk_core/protocol/adb.c ****         return 0;               // No data from device(not error);
 168:../../tmk_core/protocol/adb.c ****     }
 169:../../tmk_core/protocol/adb.c **** 
 170:../../tmk_core/protocol/adb.c ****     // start bit(1)
 171:../../tmk_core/protocol/adb.c ****     if (!wait_data_hi(40)) {
 172:../../tmk_core/protocol/adb.c ****         xprintf("S");
 173:../../tmk_core/protocol/adb.c ****         sei();
 174:../../tmk_core/protocol/adb.c ****         return 0;
 175:../../tmk_core/protocol/adb.c ****     }
 176:../../tmk_core/protocol/adb.c ****     if (!wait_data_lo(100)) {
 177:../../tmk_core/protocol/adb.c ****         xprintf("s");
 178:../../tmk_core/protocol/adb.c ****         sei();
 179:../../tmk_core/protocol/adb.c ****         return 0;
 180:../../tmk_core/protocol/adb.c ****     }
 181:../../tmk_core/protocol/adb.c **** 
 182:../../tmk_core/protocol/adb.c ****     uint8_t n = 0; // bit count
 183:../../tmk_core/protocol/adb.c ****     do {
 184:../../tmk_core/protocol/adb.c ****         //
 185:../../tmk_core/protocol/adb.c ****         // |<- bit_cell_max(130) ->|
 186:../../tmk_core/protocol/adb.c ****         // |        |<-   lo     ->|
 187:../../tmk_core/protocol/adb.c ****         // |        |       |<-hi->|
 188:../../tmk_core/protocol/adb.c ****         //           _______
 189:../../tmk_core/protocol/adb.c ****         // |        |       |
 190:../../tmk_core/protocol/adb.c ****         // | 130-lo | lo-hi |
 191:../../tmk_core/protocol/adb.c ****         // |________|       |
 192:../../tmk_core/protocol/adb.c ****         //
 193:../../tmk_core/protocol/adb.c ****         uint8_t lo = (uint8_t) wait_data_hi(130);
 194:../../tmk_core/protocol/adb.c ****         if (!lo)
 195:../../tmk_core/protocol/adb.c ****             goto error; // no more bit or after stop bit
 196:../../tmk_core/protocol/adb.c **** 
 197:../../tmk_core/protocol/adb.c ****         uint8_t hi = (uint8_t) wait_data_lo(lo);
 198:../../tmk_core/protocol/adb.c ****         if (!hi)
 199:../../tmk_core/protocol/adb.c ****             goto error; // stop bit extedned by Srq?
 200:../../tmk_core/protocol/adb.c **** 
 201:../../tmk_core/protocol/adb.c ****         if (n/8 >= len) continue; // can't store in buf
 202:../../tmk_core/protocol/adb.c **** 
 203:../../tmk_core/protocol/adb.c ****         buf[n/8] <<= 1;
 204:../../tmk_core/protocol/adb.c ****         if ((130 - lo) < (lo - hi)) {
 205:../../tmk_core/protocol/adb.c ****             buf[n/8] |= 1;
 206:../../tmk_core/protocol/adb.c ****         }
 207:../../tmk_core/protocol/adb.c ****     }
 208:../../tmk_core/protocol/adb.c ****     while ( ++n );
 209:../../tmk_core/protocol/adb.c **** 
 210:../../tmk_core/protocol/adb.c **** error:
 211:../../tmk_core/protocol/adb.c ****     sei();
 212:../../tmk_core/protocol/adb.c ****     return n/8;
 213:../../tmk_core/protocol/adb.c **** }
 214:../../tmk_core/protocol/adb.c **** 
 215:../../tmk_core/protocol/adb.c **** uint16_t adb_host_talk(uint8_t addr, uint8_t reg)
 216:../../tmk_core/protocol/adb.c **** {
 217:../../tmk_core/protocol/adb.c ****     uint8_t len;
 218:../../tmk_core/protocol/adb.c ****     uint8_t buf[8];
 219:../../tmk_core/protocol/adb.c ****     len = adb_host_talk_buf(addr, reg, buf, 8);
 220:../../tmk_core/protocol/adb.c ****     if (len != 2) return 0;
 221:../../tmk_core/protocol/adb.c ****     return (buf[0]<<8 | buf[1]);
 222:../../tmk_core/protocol/adb.c **** }
 223:../../tmk_core/protocol/adb.c **** 
 224:../../tmk_core/protocol/adb.c **** void adb_host_listen_buf(uint8_t addr, uint8_t reg, uint8_t *buf, uint8_t len)
 225:../../tmk_core/protocol/adb.c **** {
 226:../../tmk_core/protocol/adb.c ****     cli();
 227:../../tmk_core/protocol/adb.c ****     attention();
 228:../../tmk_core/protocol/adb.c ****     send_byte((addr<<4) | ADB_CMD_LISTEN | reg);
 229:../../tmk_core/protocol/adb.c ****     place_bit0();               // Stopbit(0)
 230:../../tmk_core/protocol/adb.c ****     // TODO: Service Request
 231:../../tmk_core/protocol/adb.c ****     _delay_us(200);             // Tlt/Stop to Start
 232:../../tmk_core/protocol/adb.c ****     place_bit1();               // Startbit(1)
 233:../../tmk_core/protocol/adb.c ****     for (int8_t i = 0; i < len; i++) {
 234:../../tmk_core/protocol/adb.c ****         send_byte(buf[i]);
 235:../../tmk_core/protocol/adb.c ****         //xprintf("%02X ", buf[i]);
 236:../../tmk_core/protocol/adb.c ****     }
 237:../../tmk_core/protocol/adb.c ****     place_bit0();               // Stopbit(0);
 238:../../tmk_core/protocol/adb.c ****     sei();
 239:../../tmk_core/protocol/adb.c **** }
 240:../../tmk_core/protocol/adb.c **** 
 241:../../tmk_core/protocol/adb.c **** void adb_host_listen(uint8_t addr, uint8_t reg, uint8_t data_h, uint8_t data_l)
 242:../../tmk_core/protocol/adb.c **** {
 243:../../tmk_core/protocol/adb.c ****     uint8_t buf[2] = { data_h, data_l };
 244:../../tmk_core/protocol/adb.c ****     adb_host_listen_buf(addr, reg, buf, 2);
 245:../../tmk_core/protocol/adb.c **** }
 246:../../tmk_core/protocol/adb.c **** 
 247:../../tmk_core/protocol/adb.c **** void adb_host_flush(uint8_t addr)
 248:../../tmk_core/protocol/adb.c **** {
 249:../../tmk_core/protocol/adb.c ****     cli();
 250:../../tmk_core/protocol/adb.c ****     attention();
 251:../../tmk_core/protocol/adb.c ****     send_byte((addr<<4) | ADB_CMD_FLUSH);
 252:../../tmk_core/protocol/adb.c ****     place_bit0();               // Stopbit(0)
 253:../../tmk_core/protocol/adb.c ****     _delay_us(200);             // Tlt/Stop to Start
 254:../../tmk_core/protocol/adb.c ****     sei();
 255:../../tmk_core/protocol/adb.c **** }
 256:../../tmk_core/protocol/adb.c **** 
 257:../../tmk_core/protocol/adb.c **** // send state of LEDs
 258:../../tmk_core/protocol/adb.c **** void adb_host_kbd_led(uint8_t addr, uint8_t led)
 259:../../tmk_core/protocol/adb.c **** {
 260:../../tmk_core/protocol/adb.c ****     // Listen Register2
 261:../../tmk_core/protocol/adb.c ****     //  upper byte: not used
 262:../../tmk_core/protocol/adb.c ****     //  lower byte: bit2=ScrollLock, bit1=CapsLock, bit0=NumLock
 263:../../tmk_core/protocol/adb.c ****     adb_host_listen(addr, 2, 0, led & 0x07);
 264:../../tmk_core/protocol/adb.c **** }
 265:../../tmk_core/protocol/adb.c **** 
 266:../../tmk_core/protocol/adb.c **** 
 267:../../tmk_core/protocol/adb.c **** #ifdef ADB_PSW_BIT
 268:../../tmk_core/protocol/adb.c **** static inline void psw_lo()
 269:../../tmk_core/protocol/adb.c **** {
 270:../../tmk_core/protocol/adb.c ****     ADB_DDR  |=  (1<<ADB_PSW_BIT);
 271:../../tmk_core/protocol/adb.c ****     ADB_PORT &= ~(1<<ADB_PSW_BIT);
 272:../../tmk_core/protocol/adb.c **** }
 273:../../tmk_core/protocol/adb.c **** static inline void psw_hi()
 274:../../tmk_core/protocol/adb.c **** {
 275:../../tmk_core/protocol/adb.c ****     ADB_PORT |=  (1<<ADB_PSW_BIT);
 276:../../tmk_core/protocol/adb.c ****     ADB_DDR  &= ~(1<<ADB_PSW_BIT);
 277:../../tmk_core/protocol/adb.c **** }
 278:../../tmk_core/protocol/adb.c **** static inline bool psw_in()
 279:../../tmk_core/protocol/adb.c **** {
 280:../../tmk_core/protocol/adb.c ****     ADB_PORT |=  (1<<ADB_PSW_BIT);
 281:../../tmk_core/protocol/adb.c ****     ADB_DDR  &= ~(1<<ADB_PSW_BIT);
 282:../../tmk_core/protocol/adb.c ****     return ADB_PIN&(1<<ADB_PSW_BIT);
 283:../../tmk_core/protocol/adb.c **** }
 284:../../tmk_core/protocol/adb.c **** #endif
 285:../../tmk_core/protocol/adb.c **** 
 286:../../tmk_core/protocol/adb.c **** static inline void attention(void)
 287:../../tmk_core/protocol/adb.c **** {
 288:../../tmk_core/protocol/adb.c ****     data_lo();
 289:../../tmk_core/protocol/adb.c ****     _delay_us(800-35); // bit1 holds lo for 35 more
 290:../../tmk_core/protocol/adb.c ****     place_bit1();
 291:../../tmk_core/protocol/adb.c **** }
 292:../../tmk_core/protocol/adb.c **** 
 293:../../tmk_core/protocol/adb.c **** static inline void place_bit0(void)
 294:../../tmk_core/protocol/adb.c **** {
  15               		.loc 1 294 1 view -0
  16               		.cfi_startproc
  17               	/* prologue: function */
  18               	/* frame size = 0 */
  19               	/* stack size = 0 */
  20               	.L__stack_usage = 0
 295:../../tmk_core/protocol/adb.c ****     data_lo();
  21               		.loc 1 295 5 view .LVU1
  22 0000 509A      		sbi 0xa,0
 296:../../tmk_core/protocol/adb.c ****     _delay_us(65);
  23               		.loc 1 296 5 view .LVU2
  24               	.LVL0:
  25               	.LBB21:
  26               	.LBI21:
  27               		.file 2 "/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h"
   1:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h **** /* Copyright (c) 2002, Marek Michalkiewicz
   2:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h ****    Copyright (c) 2004,2005,2007 Joerg Wunsch
   3:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h ****    Copyright (c) 2007  Florin-Viorel Petrov
   4:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h ****    All rights reserved.
   5:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h **** 
   6:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h ****    Redistribution and use in source and binary forms, with or without
   7:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h ****    modification, are permitted provided that the following conditions are met:
   8:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h **** 
   9:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h ****    * Redistributions of source code must retain the above copyright
  10:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h ****      notice, this list of conditions and the following disclaimer.
  11:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h **** 
  12:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h ****    * Redistributions in binary form must reproduce the above copyright
  13:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h ****      notice, this list of conditions and the following disclaimer in
  14:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h ****      the documentation and/or other materials provided with the
  15:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h ****      distribution.
  16:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h **** 
  17:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h ****    * Neither the name of the copyright holders nor the names of
  18:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h ****      contributors may be used to endorse or promote products derived
  19:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h ****      from this software without specific prior written permission.
  20:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h **** 
  21:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h ****   THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
  22:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h ****   AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
  23:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h ****   IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
  24:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h ****   ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE
  25:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h ****   LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR
  26:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h ****   CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF
  27:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h ****   SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS
  28:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h ****   INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN
  29:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h ****   CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)
  30:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h ****   ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE
  31:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h ****   POSSIBILITY OF SUCH DAMAGE. */
  32:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h **** 
  33:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h **** /* $Id: delay.h.in 2506 2016-02-08 10:05:45Z joerg_wunsch $ */
  34:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h **** 
  35:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h **** #ifndef _UTIL_DELAY_H_
  36:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h **** #define _UTIL_DELAY_H_ 1
  37:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h **** 
  38:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h **** #ifndef __DOXYGEN__
  39:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h **** #  ifndef __HAS_DELAY_CYCLES
  40:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h **** #    define __HAS_DELAY_CYCLES 1
  41:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h **** #  endif
  42:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h **** #endif  /* __DOXYGEN__ */
  43:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h **** 
  44:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h **** #include <inttypes.h>
  45:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h **** #include <util/delay_basic.h>
  46:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h **** #include <math.h>
  47:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h **** 
  48:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h **** /** \file */
  49:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h **** /** \defgroup util_delay <util/delay.h>: Convenience functions for busy-wait delay loops
  50:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h ****     \code
  51:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h ****     #define F_CPU 1000000UL  // 1 MHz
  52:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h ****     //#define F_CPU 14.7456E6
  53:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h ****     #include <util/delay.h>
  54:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h ****     \endcode
  55:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h **** 
  56:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h ****     \note As an alternative method, it is possible to pass the
  57:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h ****     F_CPU macro down to the compiler from the Makefile.
  58:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h ****     Obviously, in that case, no \c \#define statement should be
  59:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h ****     used.
  60:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h **** 
  61:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h ****     The functions in this header file are wrappers around the basic
  62:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h ****     busy-wait functions from <util/delay_basic.h>.  They are meant as
  63:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h ****     convenience functions where actual time values can be specified
  64:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h ****     rather than a number of cycles to wait for.  The idea behind is
  65:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h ****     that compile-time constant expressions will be eliminated by
  66:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h ****     compiler optimization so floating-point expressions can be used
  67:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h ****     to calculate the number of delay cycles needed based on the CPU
  68:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h ****     frequency passed by the macro F_CPU.
  69:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h **** 
  70:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h ****     \note In order for these functions to work as intended, compiler
  71:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h ****     optimizations <em>must</em> be enabled, and the delay time
  72:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h ****     <em>must</em> be an expression that is a known constant at
  73:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h ****     compile-time.  If these requirements are not met, the resulting
  74:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h ****     delay will be much longer (and basically unpredictable), and
  75:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h ****     applications that otherwise do not use floating-point calculations
  76:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h ****     will experience severe code bloat by the floating-point library
  77:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h ****     routines linked into the application.
  78:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h **** 
  79:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h ****     The functions available allow the specification of microsecond, and
  80:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h ****     millisecond delays directly, using the application-supplied macro
  81:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h ****     F_CPU as the CPU clock frequency (in Hertz).
  82:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h **** 
  83:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h **** */
  84:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h **** 
  85:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h **** #if !defined(__DOXYGEN__)
  86:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h **** static __inline__ void _delay_us(double __us) __attribute__((__always_inline__));
  87:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h **** static __inline__ void _delay_ms(double __ms) __attribute__((__always_inline__));
  88:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h **** #endif
  89:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h **** 
  90:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h **** #ifndef F_CPU
  91:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h **** /* prevent compiler error by supplying a default */
  92:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h **** # warning "F_CPU not defined for <util/delay.h>"
  93:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h **** /** \ingroup util_delay
  94:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h ****     \def F_CPU
  95:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h ****     \brief CPU frequency in Hz
  96:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h **** 
  97:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h ****     The macro F_CPU specifies the CPU frequency to be considered by
  98:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h ****     the delay macros.  This macro is normally supplied by the
  99:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h ****     environment (e.g. from within a project header, or the project's
 100:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h ****     Makefile).  The value 1 MHz here is only provided as a "vanilla"
 101:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h ****     fallback if no such user-provided definition could be found.
 102:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h **** 
 103:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h ****     In terms of the delay functions, the CPU frequency can be given as
 104:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h ****     a floating-point constant (e.g. 3.6864E6 for 3.6864 MHz).
 105:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h ****     However, the macros in <util/setbaud.h> require it to be an
 106:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h ****     integer value.
 107:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h ****  */
 108:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h **** # define F_CPU 1000000UL
 109:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h **** #endif
 110:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h **** 
 111:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h **** #ifndef __OPTIMIZE__
 112:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h **** # warning "Compiler optimizations disabled; functions from <util/delay.h> won't work as designed"
 113:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h **** #endif
 114:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h **** 
 115:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h **** #if __HAS_DELAY_CYCLES && defined(__OPTIMIZE__) && \
 116:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h ****   !defined(__DELAY_BACKWARD_COMPATIBLE__) &&	   \
 117:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h ****   __STDC_HOSTED__
 118:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h **** #  include <math.h>
 119:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h **** #endif
 120:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h **** 
 121:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h **** /**
 122:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h ****    \ingroup util_delay
 123:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h **** 
 124:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h ****    Perform a delay of \c __ms milliseconds, using _delay_loop_2().
 125:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h **** 
 126:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h ****    The macro F_CPU is supposed to be defined to a
 127:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h ****    constant defining the CPU clock frequency (in Hertz).
 128:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h **** 
 129:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h ****    The maximal possible delay is 262.14 ms / F_CPU in MHz.
 130:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h **** 
 131:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h ****    When the user request delay which exceed the maximum possible one,
 132:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h ****    _delay_ms() provides a decreased resolution functionality. In this
 133:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h ****    mode _delay_ms() will work with a resolution of 1/10 ms, providing
 134:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h ****    delays up to 6.5535 seconds (independent from CPU frequency).  The
 135:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h ****    user will not be informed about decreased resolution.
 136:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h **** 
 137:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h ****    If the avr-gcc toolchain has __builtin_avr_delay_cycles()
 138:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h ****    support, maximal possible delay is 4294967.295 ms/ F_CPU in MHz. For
 139:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h ****    values greater than the maximal possible delay, overflows results in
 140:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h ****    no delay i.e., 0ms.
 141:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h **** 
 142:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h ****    Conversion of \c __ms into clock cycles may not always result in
 143:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h ****    integer.  By default, the clock cycles rounded up to next
 144:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h ****    integer. This ensures that the user gets at least \c __ms
 145:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h ****    microseconds of delay.
 146:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h **** 
 147:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h ****    Alternatively, by defining the macro \c __DELAY_ROUND_DOWN__, or
 148:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h ****    \c __DELAY_ROUND_CLOSEST__, before including this header file, the
 149:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h ****    algorithm can be made to round down, or round to closest integer,
 150:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h ****    respectively.
 151:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h **** 
 152:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h ****    \note
 153:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h **** 
 154:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h ****    The implementation of _delay_ms() based on
 155:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h ****    __builtin_avr_delay_cycles() is not backward compatible with older
 156:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h ****    implementations.  In order to get functionality backward compatible
 157:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h ****    with previous versions, the macro \c "__DELAY_BACKWARD_COMPATIBLE__"
 158:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h ****    must be defined before including this header file. Also, the
 159:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h ****    backward compatible algorithm will be chosen if the code is
 160:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h ****    compiled in a <em>freestanding environment</em> (GCC option
 161:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h ****    \c -ffreestanding), as the math functions required for rounding are
 162:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h ****    not available to the compiler then.
 163:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h **** 
 164:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h ****  */
 165:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h **** void
 166:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h **** _delay_ms(double __ms)
 167:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h **** {
 168:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h **** 	double __tmp ;
 169:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h **** #if __HAS_DELAY_CYCLES && defined(__OPTIMIZE__) && \
 170:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h ****   !defined(__DELAY_BACKWARD_COMPATIBLE__) &&	   \
 171:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h ****   __STDC_HOSTED__
 172:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h **** 	uint32_t __ticks_dc;
 173:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h **** 	extern void __builtin_avr_delay_cycles(unsigned long);
 174:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h **** 	__tmp = ((F_CPU) / 1e3) * __ms;
 175:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h **** 
 176:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h **** 	#if defined(__DELAY_ROUND_DOWN__)
 177:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h **** 		__ticks_dc = (uint32_t)fabs(__tmp);
 178:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h **** 
 179:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h **** 	#elif defined(__DELAY_ROUND_CLOSEST__)
 180:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h **** 		__ticks_dc = (uint32_t)(fabs(__tmp)+0.5);
 181:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h **** 
 182:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h **** 	#else
 183:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h **** 		//round up by default
 184:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h **** 		__ticks_dc = (uint32_t)(ceil(fabs(__tmp)));
 185:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h **** 	#endif
 186:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h **** 
 187:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h **** 	__builtin_avr_delay_cycles(__ticks_dc);
 188:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h **** 
 189:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h **** #else
 190:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h **** 	uint16_t __ticks;
 191:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h **** 	__tmp = ((F_CPU) / 4e3) * __ms;
 192:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h **** 	if (__tmp < 1.0)
 193:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h **** 		__ticks = 1;
 194:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h **** 	else if (__tmp > 65535)
 195:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h **** 	{
 196:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h **** 		//	__ticks = requested delay in 1/10 ms
 197:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h **** 		__ticks = (uint16_t) (__ms * 10.0);
 198:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h **** 		while(__ticks)
 199:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h **** 		{
 200:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h **** 			// wait 1/10 ms
 201:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h **** 			_delay_loop_2(((F_CPU) / 4e3) / 10);
 202:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h **** 			__ticks --;
 203:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h **** 		}
 204:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h **** 		return;
 205:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h **** 	}
 206:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h **** 	else
 207:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h **** 		__ticks = (uint16_t)__tmp;
 208:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h **** 	_delay_loop_2(__ticks);
 209:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h **** #endif
 210:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h **** }
 211:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h **** 
 212:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h **** /**
 213:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h ****    \ingroup util_delay
 214:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h **** 
 215:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h ****    Perform a delay of \c __us microseconds, using _delay_loop_1().
 216:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h **** 
 217:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h ****    The macro F_CPU is supposed to be defined to a
 218:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h ****    constant defining the CPU clock frequency (in Hertz).
 219:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h **** 
 220:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h ****    The maximal possible delay is 768 us / F_CPU in MHz.
 221:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h **** 
 222:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h ****    If the user requests a delay greater than the maximal possible one,
 223:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h ****    _delay_us() will automatically call _delay_ms() instead.  The user
 224:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h ****    will not be informed about this case.
 225:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h **** 
 226:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h ****    If the avr-gcc toolchain has __builtin_avr_delay_cycles()
 227:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h ****    support, maximal possible delay is 4294967.295 us/ F_CPU in MHz. For
 228:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h ****    values greater than the maximal possible delay, overflow results in
 229:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h ****    no delay i.e., 0us.
 230:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h **** 
 231:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h ****    Conversion of \c __us into clock cycles may not always result in
 232:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h ****    integer.  By default, the clock cycles rounded up to next
 233:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h ****    integer. This ensures that the user gets at least \c __us
 234:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h ****    microseconds of delay.
 235:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h **** 
 236:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h ****    Alternatively, by defining the macro \c __DELAY_ROUND_DOWN__, or
 237:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h ****    \c __DELAY_ROUND_CLOSEST__, before including this header file, the
 238:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h ****    algorithm can be made to round down, or round to closest integer,
 239:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h ****    respectively.
 240:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h **** 
 241:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h ****    \note
 242:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h **** 
 243:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h ****    The implementation of _delay_ms() based on
 244:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h ****    __builtin_avr_delay_cycles() is not backward compatible with older
 245:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h ****    implementations.  In order to get functionality backward compatible
 246:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h ****    with previous versions, the macro \c __DELAY_BACKWARD_COMPATIBLE__
 247:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h ****    must be defined before including this header file. Also, the
 248:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h ****    backward compatible algorithm will be chosen if the code is
 249:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h ****    compiled in a <em>freestanding environment</em> (GCC option
 250:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h ****    \c -ffreestanding), as the math functions required for rounding are
 251:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h ****    not available to the compiler then.
 252:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h **** 
 253:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h ****  */
 254:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h **** void
 255:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h **** _delay_us(double __us)
  28               		.loc 2 255 1 view .LVU3
  29               	.LBB22:
 256:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h **** {
 257:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h **** 	double __tmp ;
  30               		.loc 2 257 2 view .LVU4
 258:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h **** #if __HAS_DELAY_CYCLES && defined(__OPTIMIZE__) && \
 259:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h ****   !defined(__DELAY_BACKWARD_COMPATIBLE__) &&	   \
 260:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h ****   __STDC_HOSTED__
 261:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h **** 	uint32_t __ticks_dc;
  31               		.loc 2 261 2 view .LVU5
 262:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h **** 	extern void __builtin_avr_delay_cycles(unsigned long);
  32               		.loc 2 262 2 view .LVU6
 263:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h **** 	__tmp = ((F_CPU) / 1e6) * __us;
  33               		.loc 2 263 2 view .LVU7
 264:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h **** 
 265:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h **** 	#if defined(__DELAY_ROUND_DOWN__)
 266:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h **** 		__ticks_dc = (uint32_t)fabs(__tmp);
 267:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h **** 
 268:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h **** 	#elif defined(__DELAY_ROUND_CLOSEST__)
 269:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h **** 		__ticks_dc = (uint32_t)(fabs(__tmp)+0.5);
 270:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h **** 
 271:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h **** 	#else
 272:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h **** 		//round up by default
 273:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h **** 		__ticks_dc = (uint32_t)(ceil(fabs(__tmp)));
  34               		.loc 2 273 3 view .LVU8
 274:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h **** 	#endif
 275:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h **** 
 276:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h **** 	__builtin_avr_delay_cycles(__ticks_dc);
  35               		.loc 2 276 2 view .LVU9
  36 0002 83E0      		ldi r24,lo8(259)
  37 0004 91E0      		ldi r25,hi8(259)
  38 0006 0197      	1:	sbiw r24,1
  39 0008 01F4      		brne 1b
  40 000a 00C0      		rjmp .
  41 000c 0000      		nop
  42               	.LVL1:
  43               		.loc 2 276 2 is_stmt 0 view .LVU10
  44               	.LBE22:
  45               	.LBE21:
 297:../../tmk_core/protocol/adb.c ****     data_hi();
  46               		.loc 1 297 5 is_stmt 1 view .LVU11
  47 000e 5098      		cbi 0xa,0
 298:../../tmk_core/protocol/adb.c ****     _delay_us(35);
  48               		.loc 1 298 5 view .LVU12
  49               	.LVL2:
  50               	.LBB23:
  51               	.LBI23:
 255:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h **** {
  52               		.loc 2 255 1 view .LVU13
  53               	.LBB24:
 257:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h **** #if __HAS_DELAY_CYCLES && defined(__OPTIMIZE__) && \
  54               		.loc 2 257 2 view .LVU14
 261:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h **** 	extern void __builtin_avr_delay_cycles(unsigned long);
  55               		.loc 2 261 2 view .LVU15
 262:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h **** 	__tmp = ((F_CPU) / 1e6) * __us;
  56               		.loc 2 262 2 view .LVU16
 263:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h **** 
  57               		.loc 2 263 2 view .LVU17
 273:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h **** 	#endif
  58               		.loc 2 273 3 view .LVU18
  59               		.loc 2 276 2 view .LVU19
  60 0010 9AEB      		ldi r25,lo8(-70)
  61 0012 9A95      	1:	dec r25
  62 0014 01F4      		brne 1b
  63 0016 00C0      		rjmp .
  64               	.LVL3:
  65               	/* epilogue start */
  66               		.loc 2 276 2 is_stmt 0 view .LVU20
  67               	.LBE24:
  68               	.LBE23:
 299:../../tmk_core/protocol/adb.c **** }
  69               		.loc 1 299 1 view .LVU21
  70 0018 0895      		ret
  71               		.cfi_endproc
  72               	.LFE18:
  74               		.section	.text.place_bit1,"ax",@progbits
  76               	place_bit1:
  77               	.LFB19:
 300:../../tmk_core/protocol/adb.c **** 
 301:../../tmk_core/protocol/adb.c **** static inline void place_bit1(void)
 302:../../tmk_core/protocol/adb.c **** {
  78               		.loc 1 302 1 is_stmt 1 view -0
  79               		.cfi_startproc
  80               	/* prologue: function */
  81               	/* frame size = 0 */
  82               	/* stack size = 0 */
  83               	.L__stack_usage = 0
 303:../../tmk_core/protocol/adb.c ****     data_lo();
  84               		.loc 1 303 5 view .LVU23
  85 0000 509A      		sbi 0xa,0
 304:../../tmk_core/protocol/adb.c ****     _delay_us(35);
  86               		.loc 1 304 5 view .LVU24
  87               	.LVL4:
  88               	.LBB25:
  89               	.LBI25:
 255:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h **** {
  90               		.loc 2 255 1 view .LVU25
  91               	.LBB26:
 257:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h **** #if __HAS_DELAY_CYCLES && defined(__OPTIMIZE__) && \
  92               		.loc 2 257 2 view .LVU26
 261:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h **** 	extern void __builtin_avr_delay_cycles(unsigned long);
  93               		.loc 2 261 2 view .LVU27
 262:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h **** 	__tmp = ((F_CPU) / 1e6) * __us;
  94               		.loc 2 262 2 view .LVU28
 263:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h **** 
  95               		.loc 2 263 2 view .LVU29
 273:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h **** 	#endif
  96               		.loc 2 273 3 view .LVU30
  97               		.loc 2 276 2 view .LVU31
  98 0002 8AEB      		ldi r24,lo8(-70)
  99 0004 8A95      	1:	dec r24
 100 0006 01F4      		brne 1b
 101 0008 00C0      		rjmp .
 102               	.LVL5:
 103               		.loc 2 276 2 is_stmt 0 view .LVU32
 104               	.LBE26:
 105               	.LBE25:
 305:../../tmk_core/protocol/adb.c ****     data_hi();
 106               		.loc 1 305 5 is_stmt 1 view .LVU33
 107 000a 5098      		cbi 0xa,0
 306:../../tmk_core/protocol/adb.c ****     _delay_us(65);
 108               		.loc 1 306 5 view .LVU34
 109               	.LVL6:
 110               	.LBB27:
 111               	.LBI27:
 255:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h **** {
 112               		.loc 2 255 1 view .LVU35
 113               	.LBB28:
 257:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h **** #if __HAS_DELAY_CYCLES && defined(__OPTIMIZE__) && \
 114               		.loc 2 257 2 view .LVU36
 261:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h **** 	extern void __builtin_avr_delay_cycles(unsigned long);
 115               		.loc 2 261 2 view .LVU37
 262:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h **** 	__tmp = ((F_CPU) / 1e6) * __us;
 116               		.loc 2 262 2 view .LVU38
 263:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h **** 
 117               		.loc 2 263 2 view .LVU39
 273:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h **** 	#endif
 118               		.loc 2 273 3 view .LVU40
 119               		.loc 2 276 2 view .LVU41
 120 000c 83E0      		ldi r24,lo8(259)
 121 000e 91E0      		ldi r25,hi8(259)
 122 0010 0197      	1:	sbiw r24,1
 123 0012 01F4      		brne 1b
 124 0014 00C0      		rjmp .
 125 0016 0000      		nop
 126               	.LVL7:
 127               	/* epilogue start */
 128               		.loc 2 276 2 is_stmt 0 view .LVU42
 129               	.LBE28:
 130               	.LBE27:
 307:../../tmk_core/protocol/adb.c **** }
 131               		.loc 1 307 1 view .LVU43
 132 0018 0895      		ret
 133               		.cfi_endproc
 134               	.LFE19:
 136               		.section	.text.send_byte,"ax",@progbits
 138               	send_byte:
 139               	.LVL8:
 140               	.LFB20:
 308:../../tmk_core/protocol/adb.c **** 
 309:../../tmk_core/protocol/adb.c **** static inline void send_byte(uint8_t data)
 310:../../tmk_core/protocol/adb.c **** {
 141               		.loc 1 310 1 is_stmt 1 view -0
 142               		.cfi_startproc
 143               		.loc 1 310 1 is_stmt 0 view .LVU45
 144 0000 EF92      		push r14
 145               	.LCFI0:
 146               		.cfi_def_cfa_offset 3
 147               		.cfi_offset 14, -2
 148 0002 FF92      		push r15
 149               	.LCFI1:
 150               		.cfi_def_cfa_offset 4
 151               		.cfi_offset 15, -3
 152 0004 0F93      		push r16
 153               	.LCFI2:
 154               		.cfi_def_cfa_offset 5
 155               		.cfi_offset 16, -4
 156 0006 1F93      		push r17
 157               	.LCFI3:
 158               		.cfi_def_cfa_offset 6
 159               		.cfi_offset 17, -5
 160 0008 CF93      		push r28
 161               	.LCFI4:
 162               		.cfi_def_cfa_offset 7
 163               		.cfi_offset 28, -6
 164 000a DF93      		push r29
 165               	.LCFI5:
 166               		.cfi_def_cfa_offset 8
 167               		.cfi_offset 29, -7
 168               	/* prologue: function */
 169               	/* frame size = 0 */
 170               	/* stack size = 6 */
 171               	.L__stack_usage = 6
 311:../../tmk_core/protocol/adb.c ****     for (int i = 0; i < 8; i++) {
 172               		.loc 1 311 5 is_stmt 1 view .LVU46
 173               	.LBB29:
 174               		.loc 1 311 10 view .LVU47
 175               	.LVL9:
 176               		.loc 1 311 14 is_stmt 0 view .LVU48
 177 000c D0E0      		ldi r29,0
 178 000e C0E0      		ldi r28,0
 312:../../tmk_core/protocol/adb.c ****         if (data&(0x80>>i))
 179               		.loc 1 312 23 view .LVU49
 180 0010 90E8      		ldi r25,lo8(-128)
 181 0012 E92E      		mov r14,r25
 182 0014 F12C      		mov r15,__zero_reg__
 183               		.loc 1 312 17 view .LVU50
 184 0016 082F      		mov r16,r24
 185 0018 10E0      		ldi r17,0
 186               	.LVL10:
 187               	.L6:
 188               		.loc 1 312 9 is_stmt 1 view .LVU51
 189               		.loc 1 312 23 is_stmt 0 view .LVU52
 190 001a C701      		movw r24,r14
 191 001c 0C2E      		mov r0,r28
 192 001e 00C0      		rjmp 2f
 193               		1:
 194 0020 9595      		asr r25
 195 0022 8795      		ror r24
 196               		2:
 197 0024 0A94      		dec r0
 198 0026 02F4      		brpl 1b
 199               		.loc 1 312 17 view .LVU53
 200 0028 8023      		and r24,r16
 201 002a 9123      		and r25,r17
 202               		.loc 1 312 12 view .LVU54
 203 002c 892B      		or r24,r25
 204 002e 01F0      		breq .L4
 313:../../tmk_core/protocol/adb.c ****             place_bit1();
 205               		.loc 1 313 13 is_stmt 1 view .LVU55
 206 0030 0E94 0000 		call place_bit1
 207               	.LVL11:
 208               	.L5:
 311:../../tmk_core/protocol/adb.c ****     for (int i = 0; i < 8; i++) {
 209               		.loc 1 311 29 is_stmt 0 discriminator 2 view .LVU56
 210 0034 2196      		adiw r28,1
 211               	.LVL12:
 311:../../tmk_core/protocol/adb.c ****     for (int i = 0; i < 8; i++) {
 212               		.loc 1 311 5 discriminator 2 view .LVU57
 213 0036 C830      		cpi r28,8
 214 0038 D105      		cpc r29,__zero_reg__
 215 003a 01F4      		brne .L6
 216               	/* epilogue start */
 217               	.LBE29:
 314:../../tmk_core/protocol/adb.c ****         else
 315:../../tmk_core/protocol/adb.c ****             place_bit0();
 316:../../tmk_core/protocol/adb.c ****     }
 317:../../tmk_core/protocol/adb.c **** }
 218               		.loc 1 317 1 view .LVU58
 219 003c DF91      		pop r29
 220 003e CF91      		pop r28
 221               	.LVL13:
 222               		.loc 1 317 1 view .LVU59
 223 0040 1F91      		pop r17
 224 0042 0F91      		pop r16
 225               	.LVL14:
 226               		.loc 1 317 1 view .LVU60
 227 0044 FF90      		pop r15
 228 0046 EF90      		pop r14
 229 0048 0895      		ret
 230               	.LVL15:
 231               	.L4:
 232               	.LBB30:
 315:../../tmk_core/protocol/adb.c ****     }
 233               		.loc 1 315 13 is_stmt 1 view .LVU61
 234 004a 0E94 0000 		call place_bit0
 235               	.LVL16:
 236 004e 00C0      		rjmp .L5
 237               	.LBE30:
 238               		.cfi_endproc
 239               	.LFE20:
 241               		.section	.text.attention,"ax",@progbits
 243               	attention:
 244               	.LFB17:
 287:../../tmk_core/protocol/adb.c ****     data_lo();
 245               		.loc 1 287 1 view -0
 246               		.cfi_startproc
 247               	/* prologue: function */
 248               	/* frame size = 0 */
 249               	/* stack size = 0 */
 250               	.L__stack_usage = 0
 288:../../tmk_core/protocol/adb.c ****     _delay_us(800-35); // bit1 holds lo for 35 more
 251               		.loc 1 288 5 view .LVU63
 252 0000 509A      		sbi 0xa,0
 289:../../tmk_core/protocol/adb.c ****     place_bit1();
 253               		.loc 1 289 5 view .LVU64
 254               	.LVL17:
 255               	.LBB31:
 256               	.LBI31:
 255:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h **** {
 257               		.loc 2 255 1 view .LVU65
 258               	.LBB32:
 257:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h **** #if __HAS_DELAY_CYCLES && defined(__OPTIMIZE__) && \
 259               		.loc 2 257 2 view .LVU66
 261:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h **** 	extern void __builtin_avr_delay_cycles(unsigned long);
 260               		.loc 2 261 2 view .LVU67
 262:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h **** 	__tmp = ((F_CPU) / 1e6) * __us;
 261               		.loc 2 262 2 view .LVU68
 263:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h **** 
 262               		.loc 2 263 2 view .LVU69
 273:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h **** 	#endif
 263               		.loc 2 273 3 view .LVU70
 264               		.loc 2 276 2 view .LVU71
 265 0002 83EF      		ldi r24,lo8(3059)
 266 0004 9BE0      		ldi r25,hi8(3059)
 267 0006 0197      	1:	sbiw r24,1
 268 0008 01F4      		brne 1b
 269 000a 00C0      		rjmp .
 270 000c 0000      		nop
 271               	.LVL18:
 272               		.loc 2 276 2 is_stmt 0 view .LVU72
 273               	.LBE32:
 274               	.LBE31:
 290:../../tmk_core/protocol/adb.c **** }
 275               		.loc 1 290 5 is_stmt 1 view .LVU73
 276 000e 0C94 0000 		jmp place_bit1
 277               	.LVL19:
 278               		.cfi_endproc
 279               	.LFE17:
 281               		.section	.text.wait_data_lo,"ax",@progbits
 283               	wait_data_lo:
 284               	.LVL20:
 285               	.LFB21:
 318:../../tmk_core/protocol/adb.c **** 
 319:../../tmk_core/protocol/adb.c **** // These are carefully coded to take 6 cycles of overhead.
 320:../../tmk_core/protocol/adb.c **** // inline asm approach became too convoluted
 321:../../tmk_core/protocol/adb.c **** static inline uint16_t wait_data_lo(uint16_t us)
 322:../../tmk_core/protocol/adb.c **** {
 286               		.loc 1 322 1 view -0
 287               		.cfi_startproc
 288               	/* prologue: function */
 289               	/* frame size = 0 */
 290               	/* stack size = 0 */
 291               	.L__stack_usage = 0
 292               	.L11:
 323:../../tmk_core/protocol/adb.c ****     do {
 293               		.loc 1 323 5 view .LVU75
 324:../../tmk_core/protocol/adb.c ****         if ( !data_in() )
 294               		.loc 1 324 9 view .LVU76
 295               		.loc 1 324 12 is_stmt 0 view .LVU77
 296 0000 489B      		sbis 0x9,0
 297 0002 00C0      		rjmp .L9
 325:../../tmk_core/protocol/adb.c ****             break;
 326:../../tmk_core/protocol/adb.c ****         _delay_us(1 - (6 * 1000000.0 / F_CPU));
 298               		.loc 1 326 9 is_stmt 1 view .LVU78
 299               	.LVL21:
 300               	.LBB33:
 301               	.LBI33:
 255:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h **** {
 302               		.loc 2 255 1 view .LVU79
 303               	.LBB34:
 257:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h **** #if __HAS_DELAY_CYCLES && defined(__OPTIMIZE__) && \
 304               		.loc 2 257 2 view .LVU80
 261:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h **** 	extern void __builtin_avr_delay_cycles(unsigned long);
 305               		.loc 2 261 2 view .LVU81
 262:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h **** 	__tmp = ((F_CPU) / 1e6) * __us;
 306               		.loc 2 262 2 view .LVU82
 263:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h **** 
 307               		.loc 2 263 2 view .LVU83
 273:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h **** 	#endif
 308               		.loc 2 273 3 view .LVU84
 309               		.loc 2 276 2 view .LVU85
 310 0004 23E0      		ldi r18,lo8(3)
 311 0006 2A95      	1:	dec r18
 312 0008 01F4      		brne 1b
 313 000a 0000      		nop
 314               	.LVL22:
 315               		.loc 2 276 2 is_stmt 0 view .LVU86
 316               	.LBE34:
 317               	.LBE33:
 327:../../tmk_core/protocol/adb.c ****     }
 328:../../tmk_core/protocol/adb.c ****     while ( --us );
 318               		.loc 1 328 5 view .LVU87
 319 000c 0197      		sbiw r24,1
 320               	.LVL23:
 321               		.loc 1 328 5 view .LVU88
 322 000e 01F4      		brne .L11
 323               	.L9:
 324               	/* epilogue start */
 329:../../tmk_core/protocol/adb.c ****     return us;
 330:../../tmk_core/protocol/adb.c **** }
 325               		.loc 1 330 1 view .LVU89
 326 0010 0895      		ret
 327               		.cfi_endproc
 328               	.LFE21:
 330               		.section	.text.wait_data_hi,"ax",@progbits
 332               	wait_data_hi:
 333               	.LVL24:
 334               	.LFB22:
 331:../../tmk_core/protocol/adb.c **** 
 332:../../tmk_core/protocol/adb.c **** static inline uint16_t wait_data_hi(uint16_t us)
 333:../../tmk_core/protocol/adb.c **** {
 335               		.loc 1 333 1 is_stmt 1 view -0
 336               		.cfi_startproc
 337               	/* prologue: function */
 338               	/* frame size = 0 */
 339               	/* stack size = 0 */
 340               	.L__stack_usage = 0
 341               	.L18:
 334:../../tmk_core/protocol/adb.c ****     do {
 342               		.loc 1 334 5 view .LVU91
 335:../../tmk_core/protocol/adb.c ****         if ( data_in() )
 343               		.loc 1 335 9 view .LVU92
 344               		.loc 1 335 12 is_stmt 0 view .LVU93
 345 0000 4899      		sbic 0x9,0
 346 0002 00C0      		rjmp .L16
 336:../../tmk_core/protocol/adb.c ****             break;
 337:../../tmk_core/protocol/adb.c ****         _delay_us(1 - (6 * 1000000.0 / F_CPU));
 347               		.loc 1 337 9 is_stmt 1 view .LVU94
 348               	.LVL25:
 349               	.LBB35:
 350               	.LBI35:
 255:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h **** {
 351               		.loc 2 255 1 view .LVU95
 352               	.LBB36:
 257:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h **** #if __HAS_DELAY_CYCLES && defined(__OPTIMIZE__) && \
 353               		.loc 2 257 2 view .LVU96
 261:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h **** 	extern void __builtin_avr_delay_cycles(unsigned long);
 354               		.loc 2 261 2 view .LVU97
 262:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h **** 	__tmp = ((F_CPU) / 1e6) * __us;
 355               		.loc 2 262 2 view .LVU98
 263:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h **** 
 356               		.loc 2 263 2 view .LVU99
 273:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h **** 	#endif
 357               		.loc 2 273 3 view .LVU100
 358               		.loc 2 276 2 view .LVU101
 359 0004 23E0      		ldi r18,lo8(3)
 360 0006 2A95      	1:	dec r18
 361 0008 01F4      		brne 1b
 362 000a 0000      		nop
 363               	.LVL26:
 364               		.loc 2 276 2 is_stmt 0 view .LVU102
 365               	.LBE36:
 366               	.LBE35:
 338:../../tmk_core/protocol/adb.c ****     }
 339:../../tmk_core/protocol/adb.c ****     while ( --us );
 367               		.loc 1 339 5 view .LVU103
 368 000c 0197      		sbiw r24,1
 369               	.LVL27:
 370               		.loc 1 339 5 view .LVU104
 371 000e 01F4      		brne .L18
 372               	.L16:
 373               	/* epilogue start */
 340:../../tmk_core/protocol/adb.c ****     return us;
 341:../../tmk_core/protocol/adb.c **** }
 374               		.loc 1 341 1 view .LVU105
 375 0010 0895      		ret
 376               		.cfi_endproc
 377               	.LFE22:
 379               		.section	.text.adb_host_init,"ax",@progbits
 380               	.global	adb_host_init
 382               	adb_host_init:
 383               	.LFB7:
  67:../../tmk_core/protocol/adb.c ****     ADB_PORT &= ~(1<<ADB_DATA_BIT);
 384               		.loc 1 67 1 is_stmt 1 view -0
 385               		.cfi_startproc
 386               	/* prologue: function */
 387               	/* frame size = 0 */
 388               	/* stack size = 0 */
 389               	.L__stack_usage = 0
  68:../../tmk_core/protocol/adb.c ****     data_hi();
 390               		.loc 1 68 5 view .LVU107
  68:../../tmk_core/protocol/adb.c ****     data_hi();
 391               		.loc 1 68 14 is_stmt 0 view .LVU108
 392 0000 5898      		cbi 0xb,0
  69:../../tmk_core/protocol/adb.c **** #ifdef ADB_PSW_BIT
 393               		.loc 1 69 5 is_stmt 1 view .LVU109
 394 0002 5098      		cbi 0xa,0
 395               	/* epilogue start */
  73:../../tmk_core/protocol/adb.c **** 
 396               		.loc 1 73 1 is_stmt 0 view .LVU110
 397 0004 0895      		ret
 398               		.cfi_endproc
 399               	.LFE7:
 401               		.section	.text.adb_mouse_init,"ax",@progbits
 402               		.weak	adb_mouse_init
 404               	adb_mouse_init:
 405               	.LFB24:
 406               		.cfi_startproc
 407               	/* prologue: function */
 408               	/* frame size = 0 */
 409               	/* stack size = 0 */
 410               	.L__stack_usage = 0
 411               	/* epilogue start */
 412 0000 0895      		ret
 413               		.cfi_endproc
 414               	.LFE24:
 416               		.section	.text.adb_mouse_task,"ax",@progbits
 417               		.weak	adb_mouse_task
 419               	adb_mouse_task:
 420               	.LFB10:
 102:../../tmk_core/protocol/adb.c ****     return;
 421               		.loc 1 102 27 is_stmt 1 view -0
 422               		.cfi_startproc
 423               	/* prologue: function */
 424               	/* frame size = 0 */
 425               	/* stack size = 0 */
 426               	.L__stack_usage = 0
 103:../../tmk_core/protocol/adb.c **** }
 427               		.loc 1 103 5 view .LVU112
 428               	/* epilogue start */
 104:../../tmk_core/protocol/adb.c **** #endif
 429               		.loc 1 104 1 is_stmt 0 view .LVU113
 430 0000 0895      		ret
 431               		.cfi_endproc
 432               	.LFE10:
 434               		.section	.text.adb_host_talk_buf,"ax",@progbits
 435               	.global	adb_host_talk_buf
 437               	adb_host_talk_buf:
 438               	.LVL28:
 439               	.LFB11:
 109:../../tmk_core/protocol/adb.c ****     for (int8_t i =0; i < len; i++) buf[i] = 0;
 440               		.loc 1 109 1 is_stmt 1 view -0
 441               		.cfi_startproc
 109:../../tmk_core/protocol/adb.c ****     for (int8_t i =0; i < len; i++) buf[i] = 0;
 442               		.loc 1 109 1 is_stmt 0 view .LVU115
 443 0000 DF92      		push r13
 444               	.LCFI6:
 445               		.cfi_def_cfa_offset 3
 446               		.cfi_offset 13, -2
 447 0002 EF92      		push r14
 448               	.LCFI7:
 449               		.cfi_def_cfa_offset 4
 450               		.cfi_offset 14, -3
 451 0004 FF92      		push r15
 452               	.LCFI8:
 453               		.cfi_def_cfa_offset 5
 454               		.cfi_offset 15, -4
 455 0006 0F93      		push r16
 456               	.LCFI9:
 457               		.cfi_def_cfa_offset 6
 458               		.cfi_offset 16, -5
 459 0008 1F93      		push r17
 460               	.LCFI10:
 461               		.cfi_def_cfa_offset 7
 462               		.cfi_offset 17, -6
 463 000a CF93      		push r28
 464               	.LCFI11:
 465               		.cfi_def_cfa_offset 8
 466               		.cfi_offset 28, -7
 467 000c DF93      		push r29
 468               	.LCFI12:
 469               		.cfi_def_cfa_offset 9
 470               		.cfi_offset 29, -8
 471               	/* prologue: function */
 472               	/* frame size = 0 */
 473               	/* stack size = 7 */
 474               	.L__stack_usage = 7
 475 000e D82F      		mov r29,r24
 476 0010 C62F      		mov r28,r22
 477 0012 7A01      		movw r14,r20
 478 0014 D22E      		mov r13,r18
 110:../../tmk_core/protocol/adb.c **** 
 479               		.loc 1 110 5 is_stmt 1 view .LVU116
 480               	.LBB37:
 110:../../tmk_core/protocol/adb.c **** 
 481               		.loc 1 110 10 view .LVU117
 482               	.LVL29:
 110:../../tmk_core/protocol/adb.c **** 
 483               		.loc 1 110 17 is_stmt 0 view .LVU118
 484 0016 20E0      		ldi r18,0
 485               	.LVL30:
 110:../../tmk_core/protocol/adb.c **** 
 486               		.loc 1 110 25 view .LVU119
 487 0018 4D2D      		mov r20,r13
 488               	.LVL31:
 110:../../tmk_core/protocol/adb.c **** 
 489               		.loc 1 110 25 view .LVU120
 490 001a 50E0      		ldi r21,0
 491               	.LVL32:
 492               	.L24:
 110:../../tmk_core/protocol/adb.c **** 
 493               		.loc 1 110 25 discriminator 1 view .LVU121
 494 001c 822F      		mov r24,r18
 495 001e 022E      		mov __tmp_reg__,r18
 496 0020 000C      		lsl r0
 497 0022 990B      		sbc r25,r25
 110:../../tmk_core/protocol/adb.c **** 
 498               		.loc 1 110 5 discriminator 1 view .LVU122
 499 0024 8417      		cp r24,r20
 500 0026 9507      		cpc r25,r21
 501 0028 04F0      		brlt .L25
 502               	.LBE37:
 112:../../tmk_core/protocol/adb.c ****     attention();
 503               		.loc 1 112 5 is_stmt 1 view .LVU123
 504               	/* #APP */
 505               	 ;  112 "../../tmk_core/protocol/adb.c" 1
 506 002a F894      		cli
 507               	 ;  0 "" 2
 113:../../tmk_core/protocol/adb.c ****     send_byte((addr<<4) | ADB_CMD_TALK | reg);
 508               		.loc 1 113 5 view .LVU124
 509               	/* #NOAPP */
 510 002c 0E94 0000 		call attention
 511               	.LVL33:
 114:../../tmk_core/protocol/adb.c ****     place_bit0();               // Stopbit(0)
 512               		.loc 1 114 5 view .LVU125
 114:../../tmk_core/protocol/adb.c ****     place_bit0();               // Stopbit(0)
 513               		.loc 1 114 20 is_stmt 0 view .LVU126
 514 0030 F0E1      		ldi r31,lo8(16)
 515 0032 DF9F      		mul r29,r31
 516 0034 C001      		movw r24,r0
 517 0036 1124      		clr __zero_reg__
 114:../../tmk_core/protocol/adb.c ****     place_bit0();               // Stopbit(0)
 518               		.loc 1 114 40 view .LVU127
 519 0038 8C2B      		or r24,r28
 114:../../tmk_core/protocol/adb.c ****     place_bit0();               // Stopbit(0)
 520               		.loc 1 114 5 view .LVU128
 521 003a 8C60      		ori r24,lo8(12)
 522 003c 0E94 0000 		call send_byte
 523               	.LVL34:
 115:../../tmk_core/protocol/adb.c ****     // TODO: Service Request(Srq):
 524               		.loc 1 115 5 is_stmt 1 view .LVU129
 525 0040 0E94 0000 		call place_bit0
 526               	.LVL35:
 160:../../tmk_core/protocol/adb.c ****         xprintf("R");
 527               		.loc 1 160 5 view .LVU130
 160:../../tmk_core/protocol/adb.c ****         xprintf("R");
 528               		.loc 1 160 10 is_stmt 0 view .LVU131
 529 0044 84EF      		ldi r24,lo8(-12)
 530 0046 91E0      		ldi r25,lo8(1)
 531 0048 0E94 0000 		call wait_data_hi
 532               	.LVL36:
 160:../../tmk_core/protocol/adb.c ****         xprintf("R");
 533               		.loc 1 160 8 view .LVU132
 534 004c 892B      		or r24,r25
 535 004e 01F4      		brne .L26
 161:../../tmk_core/protocol/adb.c ****         sei();
 536               		.loc 1 161 9 is_stmt 1 view .LVU133
 537               	.LBB38:
 161:../../tmk_core/protocol/adb.c ****         sei();
 538               		.loc 1 161 9 view .LVU134
 161:../../tmk_core/protocol/adb.c ****         sei();
 539               		.loc 1 161 9 view .LVU135
 540               	.LBE38:
 541 0050 80E0      		ldi r24,lo8(__c.1915)
 542 0052 90E0      		ldi r25,hi8(__c.1915)
 543               	.LVL37:
 544               	.L45:
 177:../../tmk_core/protocol/adb.c ****         sei();
 545               		.loc 1 177 9 is_stmt 0 view .LVU136
 546 0054 9F93      		push r25
 547               	.LCFI13:
 548               		.cfi_def_cfa_offset 10
 549 0056 8F93      		push r24
 550               	.LCFI14:
 551               		.cfi_def_cfa_offset 11
 552 0058 0E94 0000 		call __xprintf
 553               	.LVL38:
 178:../../tmk_core/protocol/adb.c ****         return 0;
 554               		.loc 1 178 9 is_stmt 1 view .LVU137
 555               	/* #APP */
 556               	 ;  178 "../../tmk_core/protocol/adb.c" 1
 557 005c 7894      		sei
 558               	 ;  0 "" 2
 179:../../tmk_core/protocol/adb.c ****     }
 559               		.loc 1 179 9 view .LVU138
 179:../../tmk_core/protocol/adb.c ****     }
 560               		.loc 1 179 16 is_stmt 0 view .LVU139
 561               	/* #NOAPP */
 562 005e 0F90      		pop __tmp_reg__
 563 0060 0F90      		pop __tmp_reg__
 564               	.LCFI15:
 565               		.cfi_def_cfa_offset 9
 566 0062 00C0      		rjmp .L46
 567               	.LVL39:
 568               	.L25:
 569               	.LBB39:
 110:../../tmk_core/protocol/adb.c **** 
 570               		.loc 1 110 37 is_stmt 1 discriminator 3 view .LVU140
 110:../../tmk_core/protocol/adb.c **** 
 571               		.loc 1 110 44 is_stmt 0 discriminator 3 view .LVU141
 572 0064 8E0D      		add r24,r14
 573 0066 9F1D      		adc r25,r15
 574 0068 FC01      		movw r30,r24
 575 006a 1082      		st Z,__zero_reg__
 576 006c 2F5F      		subi r18,lo8(-(1))
 577               	.LVL40:
 110:../../tmk_core/protocol/adb.c **** 
 578               		.loc 1 110 44 discriminator 3 view .LVU142
 579 006e 00C0      		rjmp .L24
 580               	.LVL41:
 581               	.L26:
 110:../../tmk_core/protocol/adb.c **** 
 582               		.loc 1 110 44 discriminator 3 view .LVU143
 583               	.LBE39:
 165:../../tmk_core/protocol/adb.c ****         sei();
 584               		.loc 1 165 5 is_stmt 1 view .LVU144
 165:../../tmk_core/protocol/adb.c ****         sei();
 585               		.loc 1 165 10 is_stmt 0 view .LVU145
 586 0070 84EF      		ldi r24,lo8(-12)
 587 0072 91E0      		ldi r25,lo8(1)
 588 0074 0E94 0000 		call wait_data_lo
 589               	.LVL42:
 165:../../tmk_core/protocol/adb.c ****         sei();
 590               		.loc 1 165 8 view .LVU146
 591 0078 892B      		or r24,r25
 592 007a 01F4      		brne .L28
 166:../../tmk_core/protocol/adb.c ****         return 0;               // No data from device(not error);
 593               		.loc 1 166 9 is_stmt 1 view .LVU147
 594               	/* #APP */
 595               	 ;  166 "../../tmk_core/protocol/adb.c" 1
 596 007c 7894      		sei
 597               	 ;  0 "" 2
 167:../../tmk_core/protocol/adb.c ****     }
 598               		.loc 1 167 9 view .LVU148
 599               	.LVL43:
 600               	/* #NOAPP */
 601               	.L46:
 179:../../tmk_core/protocol/adb.c ****     }
 602               		.loc 1 179 16 is_stmt 0 view .LVU149
 603 007e 80E0      		ldi r24,0
 604               	.LVL44:
 605               	.L23:
 606               	/* epilogue start */
 213:../../tmk_core/protocol/adb.c **** 
 607               		.loc 1 213 1 view .LVU150
 608 0080 DF91      		pop r29
 609 0082 CF91      		pop r28
 610 0084 1F91      		pop r17
 611 0086 0F91      		pop r16
 612 0088 FF90      		pop r15
 613 008a EF90      		pop r14
 614               	.LVL45:
 213:../../tmk_core/protocol/adb.c **** 
 615               		.loc 1 213 1 view .LVU151
 616 008c DF90      		pop r13
 617               	.LVL46:
 213:../../tmk_core/protocol/adb.c **** 
 618               		.loc 1 213 1 view .LVU152
 619 008e 0895      		ret
 620               	.LVL47:
 621               	.L28:
 171:../../tmk_core/protocol/adb.c ****         xprintf("S");
 622               		.loc 1 171 5 is_stmt 1 view .LVU153
 171:../../tmk_core/protocol/adb.c ****         xprintf("S");
 623               		.loc 1 171 10 is_stmt 0 view .LVU154
 624 0090 88E2      		ldi r24,lo8(40)
 625 0092 90E0      		ldi r25,0
 626 0094 0E94 0000 		call wait_data_hi
 627               	.LVL48:
 171:../../tmk_core/protocol/adb.c ****         xprintf("S");
 628               		.loc 1 171 8 view .LVU155
 629 0098 892B      		or r24,r25
 630 009a 01F4      		brne .L29
 172:../../tmk_core/protocol/adb.c ****         sei();
 631               		.loc 1 172 9 is_stmt 1 view .LVU156
 632               	.LBB40:
 172:../../tmk_core/protocol/adb.c ****         sei();
 633               		.loc 1 172 9 view .LVU157
 172:../../tmk_core/protocol/adb.c ****         sei();
 634               		.loc 1 172 9 view .LVU158
 635               	.LBE40:
 636 009c 80E0      		ldi r24,lo8(__c.1917)
 637 009e 90E0      		ldi r25,hi8(__c.1917)
 638 00a0 00C0      		rjmp .L45
 639               	.L29:
 176:../../tmk_core/protocol/adb.c ****         xprintf("s");
 640               		.loc 1 176 5 view .LVU159
 176:../../tmk_core/protocol/adb.c ****         xprintf("s");
 641               		.loc 1 176 10 is_stmt 0 view .LVU160
 642 00a2 84E6      		ldi r24,lo8(100)
 643 00a4 90E0      		ldi r25,0
 644 00a6 0E94 0000 		call wait_data_lo
 645               	.LVL49:
 182:../../tmk_core/protocol/adb.c ****     do {
 646               		.loc 1 182 13 view .LVU161
 647 00aa C0E0      		ldi r28,0
 648               	.LVL50:
 176:../../tmk_core/protocol/adb.c ****         xprintf("s");
 649               		.loc 1 176 8 view .LVU162
 650 00ac 892B      		or r24,r25
 651 00ae 01F4      		brne .L30
 177:../../tmk_core/protocol/adb.c ****         sei();
 652               		.loc 1 177 9 is_stmt 1 view .LVU163
 653               	.LBB41:
 177:../../tmk_core/protocol/adb.c ****         sei();
 654               		.loc 1 177 9 view .LVU164
 177:../../tmk_core/protocol/adb.c ****         sei();
 655               		.loc 1 177 9 view .LVU165
 656               	.LBE41:
 657 00b0 80E0      		ldi r24,lo8(__c.1919)
 658 00b2 90E0      		ldi r25,hi8(__c.1919)
 659 00b4 00C0      		rjmp .L45
 660               	.LVL51:
 661               	.L37:
 177:../../tmk_core/protocol/adb.c ****         sei();
 662               		.loc 1 177 9 is_stmt 0 view .LVU166
 663 00b6 C82F      		mov r28,r24
 664               	.LVL52:
 665               	.L30:
 183:../../tmk_core/protocol/adb.c ****         //
 666               		.loc 1 183 5 is_stmt 1 view .LVU167
 667               	.LBB42:
 193:../../tmk_core/protocol/adb.c ****         if (!lo)
 668               		.loc 1 193 9 view .LVU168
 193:../../tmk_core/protocol/adb.c ****         if (!lo)
 669               		.loc 1 193 32 is_stmt 0 view .LVU169
 670 00b8 82E8      		ldi r24,lo8(-126)
 671 00ba 90E0      		ldi r25,0
 672 00bc 0E94 0000 		call wait_data_hi
 673               	.LVL53:
 674 00c0 8C01      		movw r16,r24
 675               	.LVL54:
 194:../../tmk_core/protocol/adb.c ****             goto error; // no more bit or after stop bit
 676               		.loc 1 194 9 is_stmt 1 view .LVU170
 677 00c2 DC2F      		mov r29,r28
 678 00c4 D695      		lsr r29
 679 00c6 D695      		lsr r29
 680 00c8 D695      		lsr r29
 194:../../tmk_core/protocol/adb.c ****             goto error; // no more bit or after stop bit
 681               		.loc 1 194 12 is_stmt 0 view .LVU171
 682 00ca 8823      		tst r24
 683 00cc 01F0      		breq .L31
 197:../../tmk_core/protocol/adb.c ****         if (!hi)
 684               		.loc 1 197 9 is_stmt 1 view .LVU172
 685 00ce 1127      		clr r17
 686               	.LVL55:
 197:../../tmk_core/protocol/adb.c ****         if (!hi)
 687               		.loc 1 197 32 is_stmt 0 view .LVU173
 688 00d0 C801      		movw r24,r16
 689               	.LVL56:
 197:../../tmk_core/protocol/adb.c ****         if (!hi)
 690               		.loc 1 197 32 view .LVU174
 691 00d2 0E94 0000 		call wait_data_lo
 692               	.LVL57:
 198:../../tmk_core/protocol/adb.c ****             goto error; // stop bit extedned by Srq?
 693               		.loc 1 198 9 is_stmt 1 view .LVU175
 198:../../tmk_core/protocol/adb.c ****             goto error; // stop bit extedned by Srq?
 694               		.loc 1 198 12 is_stmt 0 view .LVU176
 695 00d6 8823      		tst r24
 696 00d8 01F0      		breq .L31
 201:../../tmk_core/protocol/adb.c **** 
 697               		.loc 1 201 9 is_stmt 1 view .LVU177
 201:../../tmk_core/protocol/adb.c **** 
 698               		.loc 1 201 12 is_stmt 0 view .LVU178
 699 00da DD15      		cp r29,r13
 700 00dc 00F4      		brsh .L33
 203:../../tmk_core/protocol/adb.c ****         if ((130 - lo) < (lo - hi)) {
 701               		.loc 1 203 9 is_stmt 1 view .LVU179
 203:../../tmk_core/protocol/adb.c ****         if ((130 - lo) < (lo - hi)) {
 702               		.loc 1 203 18 is_stmt 0 view .LVU180
 703 00de F701      		movw r30,r14
 704 00e0 ED0F      		add r30,r29
 705 00e2 F11D      		adc r31,__zero_reg__
 706 00e4 9081      		ld r25,Z
 707 00e6 990F      		lsl r25
 204:../../tmk_core/protocol/adb.c ****             buf[n/8] |= 1;
 708               		.loc 1 204 9 is_stmt 1 view .LVU181
 204:../../tmk_core/protocol/adb.c ****             buf[n/8] |= 1;
 709               		.loc 1 204 18 is_stmt 0 view .LVU182
 710 00e8 22E8      		ldi r18,lo8(-126)
 711 00ea 30E0      		ldi r19,0
 712 00ec 201B      		sub r18,r16
 713 00ee 310B      		sbc r19,r17
 204:../../tmk_core/protocol/adb.c ****             buf[n/8] |= 1;
 714               		.loc 1 204 30 view .LVU183
 715 00f0 081B      		sub r16,r24
 716 00f2 1109      		sbc r17,__zero_reg__
 204:../../tmk_core/protocol/adb.c ****             buf[n/8] |= 1;
 717               		.loc 1 204 12 view .LVU184
 718 00f4 2017      		cp r18,r16
 719 00f6 3107      		cpc r19,r17
 720 00f8 04F0      		brlt .L34
 721               	.L44:
 205:../../tmk_core/protocol/adb.c ****         }
 722               		.loc 1 205 22 view .LVU185
 723 00fa 9083      		st Z,r25
 724               	.L33:
 205:../../tmk_core/protocol/adb.c ****         }
 725               		.loc 1 205 22 view .LVU186
 726               	.LBE42:
 208:../../tmk_core/protocol/adb.c **** 
 727               		.loc 1 208 5 view .LVU187
 728 00fc 81E0      		ldi r24,lo8(1)
 729               	.LVL58:
 208:../../tmk_core/protocol/adb.c **** 
 730               		.loc 1 208 5 view .LVU188
 731 00fe 8C0F      		add r24,r28
 732               	.LVL59:
 208:../../tmk_core/protocol/adb.c **** 
 733               		.loc 1 208 5 view .LVU189
 734 0100 CF3F      		cpi r28,lo8(-1)
 735 0102 01F4      		brne .L37
 210:../../tmk_core/protocol/adb.c ****     sei();
 736               		.loc 1 210 1 view .LVU190
 737 0104 C0E0      		ldi r28,0
 738               	.LVL60:
 739               	.L31:
 211:../../tmk_core/protocol/adb.c ****     return n/8;
 740               		.loc 1 211 5 is_stmt 1 view .LVU191
 741               	/* #APP */
 742               	 ;  211 "../../tmk_core/protocol/adb.c" 1
 743 0106 7894      		sei
 744               	 ;  0 "" 2
 212:../../tmk_core/protocol/adb.c **** }
 745               		.loc 1 212 5 view .LVU192
 212:../../tmk_core/protocol/adb.c **** }
 746               		.loc 1 212 13 is_stmt 0 view .LVU193
 747               	/* #NOAPP */
 748 0108 8C2F      		mov r24,r28
 749 010a 8695      		lsr r24
 750 010c 8695      		lsr r24
 751 010e 8695      		lsr r24
 752 0110 00C0      		rjmp .L23
 753               	.LVL61:
 754               	.L34:
 755               	.LBB43:
 205:../../tmk_core/protocol/adb.c ****         }
 756               		.loc 1 205 13 is_stmt 1 view .LVU194
 205:../../tmk_core/protocol/adb.c ****         }
 757               		.loc 1 205 22 is_stmt 0 view .LVU195
 758 0112 9160      		ori r25,lo8(1)
 759 0114 00C0      		rjmp .L44
 760               	.LBE43:
 761               		.cfi_endproc
 762               	.LFE11:
 764               		.section	.text.adb_host_talk,"ax",@progbits
 765               	.global	adb_host_talk
 767               	adb_host_talk:
 768               	.LVL62:
 769               	.LFB12:
 216:../../tmk_core/protocol/adb.c ****     uint8_t len;
 770               		.loc 1 216 1 is_stmt 1 view -0
 771               		.cfi_startproc
 216:../../tmk_core/protocol/adb.c ****     uint8_t len;
 772               		.loc 1 216 1 is_stmt 0 view .LVU197
 773 0000 CF93      		push r28
 774               	.LCFI16:
 775               		.cfi_def_cfa_offset 3
 776               		.cfi_offset 28, -2
 777 0002 DF93      		push r29
 778               	.LCFI17:
 779               		.cfi_def_cfa_offset 4
 780               		.cfi_offset 29, -3
 781 0004 CDB7      		in r28,__SP_L__
 782 0006 DEB7      		in r29,__SP_H__
 783               	.LCFI18:
 784               		.cfi_def_cfa_register 28
 785 0008 2897      		sbiw r28,8
 786               	.LCFI19:
 787               		.cfi_def_cfa_offset 12
 788 000a 0FB6      		in __tmp_reg__,__SREG__
 789 000c F894      		cli
 790 000e DEBF      		out __SP_H__,r29
 791 0010 0FBE      		out __SREG__,__tmp_reg__
 792 0012 CDBF      		out __SP_L__,r28
 793               	/* prologue: function */
 794               	/* frame size = 8 */
 795               	/* stack size = 10 */
 796               	.L__stack_usage = 10
 217:../../tmk_core/protocol/adb.c ****     uint8_t buf[8];
 797               		.loc 1 217 5 is_stmt 1 view .LVU198
 218:../../tmk_core/protocol/adb.c ****     len = adb_host_talk_buf(addr, reg, buf, 8);
 798               		.loc 1 218 5 view .LVU199
 219:../../tmk_core/protocol/adb.c ****     if (len != 2) return 0;
 799               		.loc 1 219 5 view .LVU200
 219:../../tmk_core/protocol/adb.c ****     if (len != 2) return 0;
 800               		.loc 1 219 11 is_stmt 0 view .LVU201
 801 0014 28E0      		ldi r18,lo8(8)
 802 0016 AE01      		movw r20,r28
 803 0018 4F5F      		subi r20,-1
 804 001a 5F4F      		sbci r21,-1
 805 001c 0E94 0000 		call adb_host_talk_buf
 806               	.LVL63:
 220:../../tmk_core/protocol/adb.c ****     return (buf[0]<<8 | buf[1]);
 807               		.loc 1 220 5 is_stmt 1 view .LVU202
 220:../../tmk_core/protocol/adb.c ****     return (buf[0]<<8 | buf[1]);
 808               		.loc 1 220 8 is_stmt 0 view .LVU203
 809 0020 8230      		cpi r24,lo8(2)
 810 0022 01F4      		brne .L49
 221:../../tmk_core/protocol/adb.c **** }
 811               		.loc 1 221 5 is_stmt 1 view .LVU204
 812 0024 8981      		ldd r24,Y+1
 813 0026 9A81      		ldd r25,Y+2
 814               	.LVL64:
 221:../../tmk_core/protocol/adb.c **** }
 815               		.loc 1 221 5 is_stmt 0 view .LVU205
 816 0028 9827      		eor r25,r24
 817 002a 8927      		eor r24,r25
 818 002c 9827      		eor r25,r24
 819               	.L47:
 820               	/* epilogue start */
 222:../../tmk_core/protocol/adb.c **** 
 821               		.loc 1 222 1 view .LVU206
 822 002e 2896      		adiw r28,8
 823 0030 0FB6      		in __tmp_reg__,__SREG__
 824 0032 F894      		cli
 825 0034 DEBF      		out __SP_H__,r29
 826 0036 0FBE      		out __SREG__,__tmp_reg__
 827 0038 CDBF      		out __SP_L__,r28
 828 003a DF91      		pop r29
 829 003c CF91      		pop r28
 830 003e 0895      		ret
 831               	.LVL65:
 832               	.L49:
 220:../../tmk_core/protocol/adb.c ****     return (buf[0]<<8 | buf[1]);
 833               		.loc 1 220 26 view .LVU207
 834 0040 90E0      		ldi r25,0
 835 0042 80E0      		ldi r24,0
 836               	.LVL66:
 220:../../tmk_core/protocol/adb.c ****     return (buf[0]<<8 | buf[1]);
 837               		.loc 1 220 26 view .LVU208
 838 0044 00C0      		rjmp .L47
 839               		.cfi_endproc
 840               	.LFE12:
 842               		.section	.text.adb_host_kbd_recv,"ax",@progbits
 843               	.global	adb_host_kbd_recv
 845               	adb_host_kbd_recv:
 846               	.LVL67:
 847               	.LFB8:
  91:../../tmk_core/protocol/adb.c ****     return adb_host_talk(addr, ADB_REG_0);
 848               		.loc 1 91 1 is_stmt 1 view -0
 849               		.cfi_startproc
 850               	/* prologue: function */
 851               	/* frame size = 0 */
 852               	/* stack size = 0 */
 853               	.L__stack_usage = 0
  92:../../tmk_core/protocol/adb.c **** }
 854               		.loc 1 92 5 view .LVU210
  92:../../tmk_core/protocol/adb.c **** }
 855               		.loc 1 92 12 is_stmt 0 view .LVU211
 856 0000 60E0      		ldi r22,0
 857 0002 0C94 0000 		jmp adb_host_talk
 858               	.LVL68:
  92:../../tmk_core/protocol/adb.c **** }
 859               		.loc 1 92 12 view .LVU212
 860               		.cfi_endproc
 861               	.LFE8:
 863               		.section	.text.adb_host_listen_buf,"ax",@progbits
 864               	.global	adb_host_listen_buf
 866               	adb_host_listen_buf:
 867               	.LVL69:
 868               	.LFB13:
 225:../../tmk_core/protocol/adb.c ****     cli();
 869               		.loc 1 225 1 is_stmt 1 view -0
 870               		.cfi_startproc
 225:../../tmk_core/protocol/adb.c ****     cli();
 871               		.loc 1 225 1 is_stmt 0 view .LVU214
 872 0000 FF92      		push r15
 873               	.LCFI20:
 874               		.cfi_def_cfa_offset 3
 875               		.cfi_offset 15, -2
 876 0002 0F93      		push r16
 877               	.LCFI21:
 878               		.cfi_def_cfa_offset 4
 879               		.cfi_offset 16, -3
 880 0004 1F93      		push r17
 881               	.LCFI22:
 882               		.cfi_def_cfa_offset 5
 883               		.cfi_offset 17, -4
 884 0006 CF93      		push r28
 885               	.LCFI23:
 886               		.cfi_def_cfa_offset 6
 887               		.cfi_offset 28, -5
 888 0008 DF93      		push r29
 889               	.LCFI24:
 890               		.cfi_def_cfa_offset 7
 891               		.cfi_offset 29, -6
 892               	/* prologue: function */
 893               	/* frame size = 0 */
 894               	/* stack size = 5 */
 895               	.L__stack_usage = 5
 896 000a F82E      		mov r15,r24
 897 000c D62F      		mov r29,r22
 898 000e 8A01      		movw r16,r20
 899 0010 C22F      		mov r28,r18
 226:../../tmk_core/protocol/adb.c ****     attention();
 900               		.loc 1 226 5 is_stmt 1 view .LVU215
 901               	/* #APP */
 902               	 ;  226 "../../tmk_core/protocol/adb.c" 1
 903 0012 F894      		cli
 904               	 ;  0 "" 2
 227:../../tmk_core/protocol/adb.c ****     send_byte((addr<<4) | ADB_CMD_LISTEN | reg);
 905               		.loc 1 227 5 view .LVU216
 906               	/* #NOAPP */
 907 0014 0E94 0000 		call attention
 908               	.LVL70:
 228:../../tmk_core/protocol/adb.c ****     place_bit0();               // Stopbit(0)
 909               		.loc 1 228 5 view .LVU217
 228:../../tmk_core/protocol/adb.c ****     place_bit0();               // Stopbit(0)
 910               		.loc 1 228 20 is_stmt 0 view .LVU218
 911 0018 20E1      		ldi r18,lo8(16)
 912 001a F29E      		mul r15,r18
 913 001c C001      		movw r24,r0
 914 001e 1124      		clr __zero_reg__
 228:../../tmk_core/protocol/adb.c ****     place_bit0();               // Stopbit(0)
 915               		.loc 1 228 42 view .LVU219
 916 0020 8D2B      		or r24,r29
 228:../../tmk_core/protocol/adb.c ****     place_bit0();               // Stopbit(0)
 917               		.loc 1 228 5 view .LVU220
 918 0022 8860      		ori r24,lo8(8)
 919 0024 0E94 0000 		call send_byte
 920               	.LVL71:
 229:../../tmk_core/protocol/adb.c ****     // TODO: Service Request
 921               		.loc 1 229 5 is_stmt 1 view .LVU221
 922 0028 0E94 0000 		call place_bit0
 923               	.LVL72:
 231:../../tmk_core/protocol/adb.c ****     place_bit1();               // Startbit(1)
 924               		.loc 1 231 5 view .LVU222
 925               	.LBB44:
 926               	.LBI44:
 255:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h **** {
 927               		.loc 2 255 1 view .LVU223
 928               	.LBB45:
 257:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h **** #if __HAS_DELAY_CYCLES && defined(__OPTIMIZE__) && \
 929               		.loc 2 257 2 view .LVU224
 261:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h **** 	extern void __builtin_avr_delay_cycles(unsigned long);
 930               		.loc 2 261 2 view .LVU225
 262:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h **** 	__tmp = ((F_CPU) / 1e6) * __us;
 931               		.loc 2 262 2 view .LVU226
 263:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h **** 
 932               		.loc 2 263 2 view .LVU227
 273:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h **** 	#endif
 933               		.loc 2 273 3 view .LVU228
 934               		.loc 2 276 2 view .LVU229
 935 002c 8FE1      		ldi r24,lo8(799)
 936 002e 93E0      		ldi r25,hi8(799)
 937 0030 0197      	1:	sbiw r24,1
 938 0032 01F4      		brne 1b
 939 0034 00C0      		rjmp .
 940 0036 0000      		nop
 941               	.LVL73:
 942               		.loc 2 276 2 is_stmt 0 view .LVU230
 943               	.LBE45:
 944               	.LBE44:
 232:../../tmk_core/protocol/adb.c ****     for (int8_t i = 0; i < len; i++) {
 945               		.loc 1 232 5 is_stmt 1 view .LVU231
 946 0038 0E94 0000 		call place_bit1
 947               	.LVL74:
 233:../../tmk_core/protocol/adb.c ****         send_byte(buf[i]);
 948               		.loc 1 233 5 view .LVU232
 949               	.LBB46:
 233:../../tmk_core/protocol/adb.c ****         send_byte(buf[i]);
 950               		.loc 1 233 10 view .LVU233
 233:../../tmk_core/protocol/adb.c ****         send_byte(buf[i]);
 951               		.loc 1 233 17 is_stmt 0 view .LVU234
 952 003c F12C      		mov r15,__zero_reg__
 953               	.LVL75:
 233:../../tmk_core/protocol/adb.c ****         send_byte(buf[i]);
 954               		.loc 1 233 26 view .LVU235
 955 003e D0E0      		ldi r29,0
 956               	.LVL76:
 957               	.L52:
 233:../../tmk_core/protocol/adb.c ****         send_byte(buf[i]);
 958               		.loc 1 233 26 discriminator 1 view .LVU236
 959 0040 8F2D      		mov r24,r15
 960 0042 0F2C      		mov __tmp_reg__,r15
 961 0044 000C      		lsl r0
 962 0046 990B      		sbc r25,r25
 233:../../tmk_core/protocol/adb.c ****         send_byte(buf[i]);
 963               		.loc 1 233 5 discriminator 1 view .LVU237
 964 0048 8C17      		cp r24,r28
 965 004a 9D07      		cpc r25,r29
 966 004c 04F0      		brlt .L53
 967               	.LBE46:
 237:../../tmk_core/protocol/adb.c ****     sei();
 968               		.loc 1 237 5 is_stmt 1 view .LVU238
 969 004e 0E94 0000 		call place_bit0
 970               	.LVL77:
 238:../../tmk_core/protocol/adb.c **** }
 971               		.loc 1 238 5 view .LVU239
 972               	/* #APP */
 973               	 ;  238 "../../tmk_core/protocol/adb.c" 1
 974 0052 7894      		sei
 975               	 ;  0 "" 2
 976               	/* #NOAPP */
 977               	/* epilogue start */
 239:../../tmk_core/protocol/adb.c **** 
 978               		.loc 1 239 1 is_stmt 0 view .LVU240
 979 0054 DF91      		pop r29
 980 0056 CF91      		pop r28
 981               	.LVL78:
 239:../../tmk_core/protocol/adb.c **** 
 982               		.loc 1 239 1 view .LVU241
 983 0058 1F91      		pop r17
 984 005a 0F91      		pop r16
 985               	.LVL79:
 239:../../tmk_core/protocol/adb.c **** 
 986               		.loc 1 239 1 view .LVU242
 987 005c FF90      		pop r15
 988               	.LVL80:
 239:../../tmk_core/protocol/adb.c **** 
 989               		.loc 1 239 1 view .LVU243
 990 005e 0895      		ret
 991               	.LVL81:
 992               	.L53:
 993               	.LBB47:
 234:../../tmk_core/protocol/adb.c ****         //xprintf("%02X ", buf[i]);
 994               		.loc 1 234 9 is_stmt 1 discriminator 3 view .LVU244
 995 0060 800F      		add r24,r16
 996 0062 911F      		adc r25,r17
 997 0064 FC01      		movw r30,r24
 998 0066 8081      		ld r24,Z
 999 0068 0E94 0000 		call send_byte
 1000               	.LVL82:
 1001 006c F394      		inc r15
 1002               	.LVL83:
 234:../../tmk_core/protocol/adb.c ****         //xprintf("%02X ", buf[i]);
 1003               		.loc 1 234 9 is_stmt 0 discriminator 3 view .LVU245
 1004 006e 00C0      		rjmp .L52
 1005               	.LBE47:
 1006               		.cfi_endproc
 1007               	.LFE13:
 1009               		.section	.text.adb_host_listen,"ax",@progbits
 1010               	.global	adb_host_listen
 1012               	adb_host_listen:
 1013               	.LVL84:
 1014               	.LFB14:
 242:../../tmk_core/protocol/adb.c ****     uint8_t buf[2] = { data_h, data_l };
 1015               		.loc 1 242 1 is_stmt 1 view -0
 1016               		.cfi_startproc
 242:../../tmk_core/protocol/adb.c ****     uint8_t buf[2] = { data_h, data_l };
 1017               		.loc 1 242 1 is_stmt 0 view .LVU247
 1018 0000 CF93      		push r28
 1019               	.LCFI25:
 1020               		.cfi_def_cfa_offset 3
 1021               		.cfi_offset 28, -2
 1022 0002 DF93      		push r29
 1023               	.LCFI26:
 1024               		.cfi_def_cfa_offset 4
 1025               		.cfi_offset 29, -3
 1026 0004 00D0      		rcall .
 1027               	.LCFI27:
 1028               		.cfi_def_cfa_offset 6
 1029 0006 CDB7      		in r28,__SP_L__
 1030 0008 DEB7      		in r29,__SP_H__
 1031               	.LCFI28:
 1032               		.cfi_def_cfa_register 28
 1033               	/* prologue: function */
 1034               	/* frame size = 2 */
 1035               	/* stack size = 4 */
 1036               	.L__stack_usage = 4
 243:../../tmk_core/protocol/adb.c ****     adb_host_listen_buf(addr, reg, buf, 2);
 1037               		.loc 1 243 5 is_stmt 1 view .LVU248
 243:../../tmk_core/protocol/adb.c ****     adb_host_listen_buf(addr, reg, buf, 2);
 1038               		.loc 1 243 13 is_stmt 0 view .LVU249
 1039 000a 4983      		std Y+1,r20
 1040 000c 2A83      		std Y+2,r18
 244:../../tmk_core/protocol/adb.c **** }
 1041               		.loc 1 244 5 is_stmt 1 view .LVU250
 1042 000e 22E0      		ldi r18,lo8(2)
 1043               	.LVL85:
 244:../../tmk_core/protocol/adb.c **** }
 1044               		.loc 1 244 5 is_stmt 0 view .LVU251
 1045 0010 AE01      		movw r20,r28
 1046               	.LVL86:
 244:../../tmk_core/protocol/adb.c **** }
 1047               		.loc 1 244 5 view .LVU252
 1048 0012 4F5F      		subi r20,-1
 1049 0014 5F4F      		sbci r21,-1
 1050 0016 0E94 0000 		call adb_host_listen_buf
 1051               	.LVL87:
 1052               	/* epilogue start */
 245:../../tmk_core/protocol/adb.c **** 
 1053               		.loc 1 245 1 view .LVU253
 1054 001a 0F90      		pop __tmp_reg__
 1055 001c 0F90      		pop __tmp_reg__
 1056 001e DF91      		pop r29
 1057 0020 CF91      		pop r28
 1058 0022 0895      		ret
 1059               		.cfi_endproc
 1060               	.LFE14:
 1062               		.section	.text.adb_host_flush,"ax",@progbits
 1063               	.global	adb_host_flush
 1065               	adb_host_flush:
 1066               	.LVL88:
 1067               	.LFB15:
 248:../../tmk_core/protocol/adb.c ****     cli();
 1068               		.loc 1 248 1 is_stmt 1 view -0
 1069               		.cfi_startproc
 248:../../tmk_core/protocol/adb.c ****     cli();
 1070               		.loc 1 248 1 is_stmt 0 view .LVU255
 1071 0000 CF93      		push r28
 1072               	.LCFI29:
 1073               		.cfi_def_cfa_offset 3
 1074               		.cfi_offset 28, -2
 1075               	/* prologue: function */
 1076               	/* frame size = 0 */
 1077               	/* stack size = 1 */
 1078               	.L__stack_usage = 1
 1079 0002 C82F      		mov r28,r24
 249:../../tmk_core/protocol/adb.c ****     attention();
 1080               		.loc 1 249 5 is_stmt 1 view .LVU256
 1081               	/* #APP */
 1082               	 ;  249 "../../tmk_core/protocol/adb.c" 1
 1083 0004 F894      		cli
 1084               	 ;  0 "" 2
 250:../../tmk_core/protocol/adb.c ****     send_byte((addr<<4) | ADB_CMD_FLUSH);
 1085               		.loc 1 250 5 view .LVU257
 1086               	/* #NOAPP */
 1087 0006 0E94 0000 		call attention
 1088               	.LVL89:
 251:../../tmk_core/protocol/adb.c ****     place_bit0();               // Stopbit(0)
 1089               		.loc 1 251 5 view .LVU258
 251:../../tmk_core/protocol/adb.c ****     place_bit0();               // Stopbit(0)
 1090               		.loc 1 251 20 is_stmt 0 view .LVU259
 1091 000a 20E1      		ldi r18,lo8(16)
 1092 000c C29F      		mul r28,r18
 1093 000e C001      		movw r24,r0
 1094 0010 1124      		clr __zero_reg__
 251:../../tmk_core/protocol/adb.c ****     place_bit0();               // Stopbit(0)
 1095               		.loc 1 251 5 view .LVU260
 1096 0012 8160      		ori r24,lo8(1)
 1097 0014 0E94 0000 		call send_byte
 1098               	.LVL90:
 252:../../tmk_core/protocol/adb.c ****     _delay_us(200);             // Tlt/Stop to Start
 1099               		.loc 1 252 5 is_stmt 1 view .LVU261
 1100 0018 0E94 0000 		call place_bit0
 1101               	.LVL91:
 253:../../tmk_core/protocol/adb.c ****     sei();
 1102               		.loc 1 253 5 view .LVU262
 1103               	.LBB48:
 1104               	.LBI48:
 255:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h **** {
 1105               		.loc 2 255 1 view .LVU263
 1106               	.LBB49:
 257:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h **** #if __HAS_DELAY_CYCLES && defined(__OPTIMIZE__) && \
 1107               		.loc 2 257 2 view .LVU264
 261:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h **** 	extern void __builtin_avr_delay_cycles(unsigned long);
 1108               		.loc 2 261 2 view .LVU265
 262:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h **** 	__tmp = ((F_CPU) / 1e6) * __us;
 1109               		.loc 2 262 2 view .LVU266
 263:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h **** 
 1110               		.loc 2 263 2 view .LVU267
 273:/usr/local/Cellar/avr-gcc/9.1.0/avr/include/util/delay.h **** 	#endif
 1111               		.loc 2 273 3 view .LVU268
 1112               		.loc 2 276 2 view .LVU269
 1113 001c 8FE1      		ldi r24,lo8(799)
 1114 001e 93E0      		ldi r25,hi8(799)
 1115 0020 0197      	1:	sbiw r24,1
 1116 0022 01F4      		brne 1b
 1117 0024 00C0      		rjmp .
 1118 0026 0000      		nop
 1119               	.LVL92:
 1120               		.loc 2 276 2 is_stmt 0 view .LVU270
 1121               	.LBE49:
 1122               	.LBE48:
 254:../../tmk_core/protocol/adb.c **** }
 1123               		.loc 1 254 5 is_stmt 1 view .LVU271
 1124               	/* #APP */
 1125               	 ;  254 "../../tmk_core/protocol/adb.c" 1
 1126 0028 7894      		sei
 1127               	 ;  0 "" 2
 1128               	/* #NOAPP */
 1129               	/* epilogue start */
 255:../../tmk_core/protocol/adb.c **** 
 1130               		.loc 1 255 1 is_stmt 0 view .LVU272
 1131 002a CF91      		pop r28
 1132               	.LVL93:
 255:../../tmk_core/protocol/adb.c **** 
 1133               		.loc 1 255 1 view .LVU273
 1134 002c 0895      		ret
 1135               		.cfi_endproc
 1136               	.LFE15:
 1138               		.section	.text.adb_host_kbd_led,"ax",@progbits
 1139               	.global	adb_host_kbd_led
 1141               	adb_host_kbd_led:
 1142               	.LVL94:
 1143               	.LFB16:
 259:../../tmk_core/protocol/adb.c ****     // Listen Register2
 1144               		.loc 1 259 1 is_stmt 1 view -0
 1145               		.cfi_startproc
 1146               	/* prologue: function */
 1147               	/* frame size = 0 */
 1148               	/* stack size = 0 */
 1149               	.L__stack_usage = 0
 263:../../tmk_core/protocol/adb.c **** }
 1150               		.loc 1 263 5 view .LVU275
 1151 0000 262F      		mov r18,r22
 1152 0002 2770      		andi r18,lo8(7)
 1153 0004 40E0      		ldi r20,0
 1154 0006 62E0      		ldi r22,lo8(2)
 1155               	.LVL95:
 263:../../tmk_core/protocol/adb.c **** }
 1156               		.loc 1 263 5 is_stmt 0 view .LVU276
 1157 0008 0C94 0000 		jmp adb_host_listen
 1158               	.LVL96:
 263:../../tmk_core/protocol/adb.c **** }
 1159               		.loc 1 263 5 view .LVU277
 1160               		.cfi_endproc
 1161               	.LFE16:
 1163               		.section	.progmem.data.__c.1919,"a"
 1166               	__c.1919:
 1167 0000 7300      		.string	"s"
 1168               		.section	.progmem.data.__c.1917,"a"
 1171               	__c.1917:
 1172 0000 5300      		.string	"S"
 1173               		.section	.progmem.data.__c.1915,"a"
 1176               	__c.1915:
 1177 0000 5200      		.string	"R"
 1178               		.text
 1179               	.Letext0:
 1180               		.file 3 "/usr/local/Cellar/avr-gcc/9.1.0/avr/include/stdint.h"
 1181               		.file 4 "../../tmk_core/common/avr/xprintf.h"
DEFINED SYMBOLS
                            *ABS*:0000000000000000 adb.c
/var/folders/cl/jr07md_52y31f_27z07pkw7h0000gp/T//ccNn0ZaG.s:2      *ABS*:000000000000003e __SP_H__
/var/folders/cl/jr07md_52y31f_27z07pkw7h0000gp/T//ccNn0ZaG.s:3      *ABS*:000000000000003d __SP_L__
/var/folders/cl/jr07md_52y31f_27z07pkw7h0000gp/T//ccNn0ZaG.s:4      *ABS*:000000000000003f __SREG__
/var/folders/cl/jr07md_52y31f_27z07pkw7h0000gp/T//ccNn0ZaG.s:5      *ABS*:0000000000000000 __tmp_reg__
/var/folders/cl/jr07md_52y31f_27z07pkw7h0000gp/T//ccNn0ZaG.s:6      *ABS*:0000000000000001 __zero_reg__
/var/folders/cl/jr07md_52y31f_27z07pkw7h0000gp/T//ccNn0ZaG.s:12     .text.place_bit0:0000000000000000 place_bit0
/var/folders/cl/jr07md_52y31f_27z07pkw7h0000gp/T//ccNn0ZaG.s:76     .text.place_bit1:0000000000000000 place_bit1
/var/folders/cl/jr07md_52y31f_27z07pkw7h0000gp/T//ccNn0ZaG.s:138    .text.send_byte:0000000000000000 send_byte
/var/folders/cl/jr07md_52y31f_27z07pkw7h0000gp/T//ccNn0ZaG.s:243    .text.attention:0000000000000000 attention
/var/folders/cl/jr07md_52y31f_27z07pkw7h0000gp/T//ccNn0ZaG.s:283    .text.wait_data_lo:0000000000000000 wait_data_lo
/var/folders/cl/jr07md_52y31f_27z07pkw7h0000gp/T//ccNn0ZaG.s:332    .text.wait_data_hi:0000000000000000 wait_data_hi
/var/folders/cl/jr07md_52y31f_27z07pkw7h0000gp/T//ccNn0ZaG.s:382    .text.adb_host_init:0000000000000000 adb_host_init
/var/folders/cl/jr07md_52y31f_27z07pkw7h0000gp/T//ccNn0ZaG.s:404    .text.adb_mouse_init:0000000000000000 adb_mouse_init
/var/folders/cl/jr07md_52y31f_27z07pkw7h0000gp/T//ccNn0ZaG.s:419    .text.adb_mouse_task:0000000000000000 adb_mouse_task
/var/folders/cl/jr07md_52y31f_27z07pkw7h0000gp/T//ccNn0ZaG.s:437    .text.adb_host_talk_buf:0000000000000000 adb_host_talk_buf
/var/folders/cl/jr07md_52y31f_27z07pkw7h0000gp/T//ccNn0ZaG.s:1176   .progmem.data.__c.1915:0000000000000000 __c.1915
/var/folders/cl/jr07md_52y31f_27z07pkw7h0000gp/T//ccNn0ZaG.s:1171   .progmem.data.__c.1917:0000000000000000 __c.1917
/var/folders/cl/jr07md_52y31f_27z07pkw7h0000gp/T//ccNn0ZaG.s:1166   .progmem.data.__c.1919:0000000000000000 __c.1919
/var/folders/cl/jr07md_52y31f_27z07pkw7h0000gp/T//ccNn0ZaG.s:767    .text.adb_host_talk:0000000000000000 adb_host_talk
/var/folders/cl/jr07md_52y31f_27z07pkw7h0000gp/T//ccNn0ZaG.s:845    .text.adb_host_kbd_recv:0000000000000000 adb_host_kbd_recv
/var/folders/cl/jr07md_52y31f_27z07pkw7h0000gp/T//ccNn0ZaG.s:866    .text.adb_host_listen_buf:0000000000000000 adb_host_listen_buf
/var/folders/cl/jr07md_52y31f_27z07pkw7h0000gp/T//ccNn0ZaG.s:1012   .text.adb_host_listen:0000000000000000 adb_host_listen
/var/folders/cl/jr07md_52y31f_27z07pkw7h0000gp/T//ccNn0ZaG.s:1065   .text.adb_host_flush:0000000000000000 adb_host_flush
/var/folders/cl/jr07md_52y31f_27z07pkw7h0000gp/T//ccNn0ZaG.s:1141   .text.adb_host_kbd_led:0000000000000000 adb_host_kbd_led

UNDEFINED SYMBOLS
__xprintf
